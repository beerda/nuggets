<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>nuggets: Get Started • nuggets</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="nuggets: Get Started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nuggets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/nuggets.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/beerda/nuggets/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>nuggets: Get Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/beerda/nuggets/blob/main/vignettes/nuggets.Rmd" class="external-link"><code>vignettes/nuggets.Rmd</code></a></small>
      <div class="d-none name"><code>nuggets.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Package <code>nuggets</code> searches for patterns that can be
described with formulae in the form of elementary conjunctions, which
are called <strong>conditions</strong> in this text. The conditions are
constructed from predicates, which represent data columns. The user may
select the interpretation of conditions by selecting the underlying
logic:</p>
<ul>
<li>
<strong>crisp (i.e. Boolean, binary) logic</strong>, where each
predicate may be either true (1) or false (0), and the truth value of
the condition is computed using the laws of classical Boolean algebra;
or</li>
<li>
<strong>fuzzy logic</strong>, where each predicate may have assigned
a <em>truth degree</em> from the interval
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">[0, 1]</annotation></semantics></math>
and the truth degree of the conjunction is computed with a selected
<em>triangular norm (t-norm)</em>. Package <code>nuggets</code> allows
to work with three most common t-norms: <em>Goedel</em> (minimum),
<em>Goguen</em> (product), and <em>Lukasiewicz</em>. Let
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>,</mo><mi>b</mi><mo>∈</mo><mrow><mo stretchy="true" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">a, b \in [0, 1]</annotation></semantics></math>
be the truth degrees of two predicates. Goedel t-norm is defined as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>min</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\min(a, b)</annotation></semantics></math>,
Goguen t-norm as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⋅</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \cdot b</annotation></semantics></math>,
and Lukasiewicz t-norm as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>max</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\max(0, a + b - 1)</annotation></semantics></math>.</li>
</ul>
<p>Before analyzed by <code>nuggets</code>, the data columns that would
serve as predicates in conditions have to be either dichotomized or
transformed to fuzzy sets. The package provides functions for both
transformations. See the section <strong>Data Preparation</strong> for
more details.</p>
<p><code>nuggets</code> provides functions to search for patterns of
pre-defined types, such as <code><a href="../reference/dig_implications.html">dig_implications()</a></code> for
implicative rules, <code><a href="../reference/dig_contrasts.html">dig_contrasts()</a></code> for contrast patterns,
and <code><a href="../reference/dig_correlations.html">dig_correlations()</a></code> for conditional correlations. See
the section <strong>Pre-defined Patterns</strong> for more details.</p>
<p>The user may also define a custom function to evaluate the conditions
and search for patterns of a different type. <code><a href="../reference/dig.html">dig()</a></code> function
is a general function that allows to search for patterns of any type.
<code><a href="../reference/dig_grid.html">dig_grid()</a></code> function is a wrapper around <code><a href="../reference/dig.html">dig()</a></code>
that allows to search for patterns defined by conditions and a pair of
columns, whose combination is evaluated by the user-defined function.
See the section <strong>Custom Patterns</strong> for more details.</p>
</div>
<div class="section level2">
<h2 id="data-preparation">Data Preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h2>
<div class="section level3">
<h3 id="preparations-of-crisp-boolean-predicates">Preparations of Crisp (Boolean) Predicates<a class="anchor" aria-label="anchor" href="#preparations-of-crisp-boolean-predicates"></a>
</h3>
<p>For patterns based on crisp conditions, the data columns that would
serve as predicates in conditions have to be transformed to logical
(<code>TRUE</code>/<code>FALSE</code>) data:</p>
<ul>
<li>numeric columns have to be transformed to factors with a selected
number of levels;</li>
<li>factors have to be transformed to dummy logical columns.</li>
</ul>
<p>Both operations can be done with the help of the
<code><a href="../reference/partition.html">partition()</a></code> function. The <code><a href="../reference/partition.html">partition()</a></code> function
requires the dataset as its first argument and a <em>tidyselect</em>
selection expression to select the columns to be transformed. Factors
and logical columns are transformed to dummy logical columns.</p>
<p>For numeric columns, the <code><a href="../reference/partition.html">partition()</a></code> function requires
the <code>.method</code> argument to specify the method of partitioning.
The <code>"crisp"</code> method divides the range of values of the
selected columns into intervals specified by the <code>.breaks</code>
argument and codes the values into dummy logical columns. The
<code>.breaks</code> argument is a numeric vector that specifies the
border values of the intervals.</p>
<p>For example, consider the <code>CO2</code> dataset from the
<code>datasets</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">CO2</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Plant   Type  Treatment conc uptake</span></span>
<span><span class="co">#&gt; 1   Qn1 Quebec nonchilled   95   16.0</span></span>
<span><span class="co">#&gt; 2   Qn1 Quebec nonchilled  175   30.4</span></span>
<span><span class="co">#&gt; 3   Qn1 Quebec nonchilled  250   34.8</span></span>
<span><span class="co">#&gt; 4   Qn1 Quebec nonchilled  350   37.2</span></span>
<span><span class="co">#&gt; 5   Qn1 Quebec nonchilled  500   35.3</span></span>
<span><span class="co">#&gt; 6   Qn1 Quebec nonchilled  675   39.2</span></span></code></pre></div>
<p>The <code>Plant</code>, <code>Type</code>, and <code>Treatment</code>
columns are factors and they will be transformed to dummy logical
columns without any special arguments added to the
<code><a href="../reference/partition.html">partition()</a></code> function:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">CO2</span>, <span class="va">Plant</span><span class="op">:</span><span class="va">Treatment</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 84 × 18</span></span></span>
<span><span class="co">#&gt;     conc uptake `Plant=Qn1` `Plant=Qn2` `Plant=Qn3` `Plant=Qc1` `Plant=Qc3`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    95   16   TRUE        FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   175   30.4 TRUE        FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   250   34.8 TRUE        FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   350   37.2 TRUE        FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   500   35.3 TRUE        FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   675   39.2 TRUE        FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">1</span>000   39.7 TRUE        FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    95   13.6 FALSE       TRUE        FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   175   27.3 FALSE       TRUE        FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   250   37.1 FALSE       TRUE        FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 74 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11 more variables: `Plant=Qc2` &lt;lgl&gt;, `Plant=Mn3` &lt;lgl&gt;, `Plant=Mn2` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Plant=Mn1` &lt;lgl&gt;, `Plant=Mc2` &lt;lgl&gt;, `Plant=Mc3` &lt;lgl&gt;, `Plant=Mc1` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Type=Quebec` &lt;lgl&gt;, `Type=Mississippi` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Treatment=nonchilled` &lt;lgl&gt;, `Treatment=chilled` &lt;lgl&gt;</span></span></span></code></pre></div>
<p>The <code>conc</code> and <code>uptake</code> columns are numeric.
For instance, we can split the <code>conc</code> column into four
intervals: (-Inf, 175], (175, 350], (350, 675], and (675, Inf). The
breaks are thus <code>c(-Inf, 175, 350, 675, Inf)</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">CO2</span>, <span class="va">conc</span>, .method <span class="op">=</span> <span class="st">"crisp"</span>, .breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">175</span>, <span class="fl">350</span>, <span class="fl">675</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 84 × 8</span></span></span>
<span><span class="co">#&gt;    Plant Type   Treatment  uptake `conc=(-Inf;175]` `conc=(175;350]`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Qn1   Quebec nonchilled   16   TRUE              FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Qn1   Quebec nonchilled   30.4 TRUE              FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Qn1   Quebec nonchilled   34.8 FALSE             TRUE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Qn1   Quebec nonchilled   37.2 FALSE             TRUE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Qn1   Quebec nonchilled   35.3 FALSE             FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Qn1   Quebec nonchilled   39.2 FALSE             FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Qn1   Quebec nonchilled   39.7 FALSE             FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Qn2   Quebec nonchilled   13.6 TRUE              FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Qn2   Quebec nonchilled   27.3 TRUE              FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Qn2   Quebec nonchilled   37.1 FALSE             TRUE            </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 74 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: `conc=(350;675]` &lt;lgl&gt;, `conc=(675;Inf]` &lt;lgl&gt;</span></span></span></code></pre></div>
<p>Similarly, we can split the <code>uptake</code> column into three
intervals: (-Inf, 10], (10, 20], and (20, Inf) by specifying the breaks
<code>c(-Inf, 10, 20, Inf)</code>.</p>
<p>The transformation of the whole <code>CO2</code> dataset to crisp
predicates can be done as follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crispCO2</span> <span class="op">&lt;-</span> <span class="va">CO2</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">Plant</span><span class="op">:</span><span class="va">Treatment</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">conc</span>, .method <span class="op">=</span> <span class="st">"crisp"</span>, .breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">175</span>, <span class="fl">350</span>, <span class="fl">675</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">uptake</span>, .method <span class="op">=</span> <span class="st">"crisp"</span>, .breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">10</span>, <span class="fl">20</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">crispCO2</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 23</span></span></span>
<span><span class="co">#&gt;   `Plant=Qn1` `Plant=Qn2` `Plant=Qn3` `Plant=Qc1` `Plant=Qc3` `Plant=Qc2`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 17 more variables: `Plant=Mn3` &lt;lgl&gt;, `Plant=Mn2` &lt;lgl&gt;, `Plant=Mn1` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Plant=Mc2` &lt;lgl&gt;, `Plant=Mc3` &lt;lgl&gt;, `Plant=Mc1` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Type=Quebec` &lt;lgl&gt;, `Type=Mississippi` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Treatment=nonchilled` &lt;lgl&gt;, `Treatment=chilled` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `conc=(-Inf;175]` &lt;lgl&gt;, `conc=(175;350]` &lt;lgl&gt;, `conc=(350;675]` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `conc=(675;Inf]` &lt;lgl&gt;, `uptake=(-Inf;10]` &lt;lgl&gt;, `uptake=(10;20]` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `uptake=(20;Inf]` &lt;lgl&gt;</span></span></span></code></pre></div>
<p>Each call to the <code><a href="../reference/partition.html">partition()</a></code> function returns a tibble
data frame with the selected columns transformed to dummy logical
columns while the other columns remain unchanged.</p>
<p>Each original factor column became replaced by a set of logical
columns, all of which start with the original column name and are
followed by the factor level name. For example, the <code>Type</code>
column, which is a factor with two levels <code>Quebec</code> and
<code>Mississippi</code>, was replaced by two logical columns:
<code>Type=Quebec</code> and <code>Type=Mississippi</code>. Numeric
columns were replaced by logical columns with names that indicate the
interval to which the original value belongs. For example, the
<code>conc</code> column was replaced by four logical columns:
<code>conc=(-Inf,175]</code>, <code>conc=(175,350]</code>,
<code>conc=(350,675]</code>, and <code>conc=(675,Inf)</code>. Other
columns were transformed similarly:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">crispCO2</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Plant=Qn1"            "Plant=Qn2"            "Plant=Qn3"           </span></span>
<span><span class="co">#&gt;  [4] "Plant=Qc1"            "Plant=Qc3"            "Plant=Qc2"           </span></span>
<span><span class="co">#&gt;  [7] "Plant=Mn3"            "Plant=Mn2"            "Plant=Mn1"           </span></span>
<span><span class="co">#&gt; [10] "Plant=Mc2"            "Plant=Mc3"            "Plant=Mc1"           </span></span>
<span><span class="co">#&gt; [13] "Type=Quebec"          "Type=Mississippi"     "Treatment=nonchilled"</span></span>
<span><span class="co">#&gt; [16] "Treatment=chilled"    "conc=(-Inf;175]"      "conc=(175;350]"      </span></span>
<span><span class="co">#&gt; [19] "conc=(350;675]"       "conc=(675;Inf]"       "uptake=(-Inf;10]"    </span></span>
<span><span class="co">#&gt; [22] "uptake=(10;20]"       "uptake=(20;Inf]"</span></span></code></pre></div>
<p>Now all the columns are logical and can be used as predicates in
crisp conditions.</p>
</div>
<div class="section level3">
<h3 id="preparations-of-fuzzy-predicates">Preparations of Fuzzy Predicates<a class="anchor" aria-label="anchor" href="#preparations-of-fuzzy-predicates"></a>
</h3>
<p>For patterns based on fuzzy conditions, the data columns that would
serve as predicates in conditions have to be transformed to fuzzy
predicates. The fuzzy predicate is represented by a vector of truth
degrees from the interval
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">[0, 1]</annotation></semantics></math>.
The truth degree of a predicate is the degree to which the predicate is
true with 0 meaning that the predicate is false and 1 meaning that the
predicate is true. A value between 0 and 1 indicates a partial
truthfulness.</p>
<p>In order to search for fuzzy patterns, the numeric input data columns
have to be transformed to fuzzy predicates, i.e., to vectors of truth
degrees from the interval
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">[0, 1]</annotation></semantics></math>.
(Fuzzy methods allow to be used with logical columns too.)</p>
<p>The transformation to fuzzy predicates can be done again with the
help of the <code><a href="../reference/partition.html">partition()</a></code> function. Again, factors will be
transformed to dummy logical columns. On the other hand, numeric columns
will be transformed to fuzzy predicates. For that, the
<code><a href="../reference/partition.html">partition()</a></code> function provides two fuzzy partitioning
methods: <code>"triangle"</code> and <code>"raisedcos"</code>. The
<code>"triangle"</code> method creates fuzzy sets with triangular
membership functions, while the <code>"raisedcos"</code> method creates
fuzzy sets with raised cosine membership functions.</p>
<p>More advanced fuzzy partitioning of numeric columns may be achieved
with the help of the <a href="https://cran.r-project.org/package=lfl" class="external-link">lfl</a> package, which
provides tools for definition of fuzzy sets of many types including
fuzzy sets that model linguistic terms such as “very small”, “extremely
big” and so on. See the <a href="https://github.com/beerda/lfl/blob/master/vignettes/main.pdf" class="external-link"><code>lfl</code>
documentation</a> for more information.</p>
<p>In the following example, both the <code>conc</code> and
<code>uptake</code> columns are transformed to fuzzy sets with
triangular membership functions. For that, the <code><a href="../reference/partition.html">partition()</a></code>
function requires the <code>.breaks</code> argument to specify the shape
of fuzzy sets. For <code>.method = "triangle"</code>, each consecutive
triplet of values in the <code>.breaks</code> vector specifies a single
triangular fuzzy set: the first and the last value of the triplet are
the borders of the triangle, and the middle value is the peak of the
triangle.</p>
<p>For instance, the <code>conc</code> column’s <code>.breaks</code> may
be specified as <code>c(-Inf, 175, 350, 675, Inf)</code>, which creates
three triangular fuzzy sets: <code>conc=(-Inf,175,350)</code>,
<code>conc=(175,350,675)</code>, and <code>conc=(350,675,Inf)</code>.
Similarly, the <code>uptake</code> column’s <code>.breaks</code> may be
specified as <code>c(-Inf, 18, 28, 37, Inf)</code>.</p>
<p>The transformation of the whole <code>CO2</code> dataset to fuzzy
predicates can be done as follows:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fuzzyCO2</span> <span class="op">&lt;-</span> <span class="va">CO2</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">Plant</span><span class="op">:</span><span class="va">Treatment</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">conc</span>, .method <span class="op">=</span> <span class="st">"triangle"</span>, .breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">175</span>, <span class="fl">350</span>, <span class="fl">675</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">uptake</span>, .method <span class="op">=</span> <span class="st">"triangle"</span>, .breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">18</span>, <span class="fl">28</span>, <span class="fl">37</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">fuzzyCO2</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 22</span></span></span>
<span><span class="co">#&gt;   `Plant=Qn1` `Plant=Qn2` `Plant=Qn3` `Plant=Qc1` `Plant=Qc3` `Plant=Qc2`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 16 more variables: `Plant=Mn3` &lt;lgl&gt;, `Plant=Mn2` &lt;lgl&gt;, `Plant=Mn1` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Plant=Mc2` &lt;lgl&gt;, `Plant=Mc3` &lt;lgl&gt;, `Plant=Mc1` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Type=Quebec` &lt;lgl&gt;, `Type=Mississippi` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Treatment=nonchilled` &lt;lgl&gt;, `Treatment=chilled` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `conc=(-Inf;175;350)` &lt;dbl&gt;, `conc=(175;350;675)` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `conc=(350;675;Inf)` &lt;dbl&gt;, `uptake=(-Inf;18;28)` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `uptake=(18;28;37)` &lt;dbl&gt;, `uptake=(28;37;Inf)` &lt;dbl&gt;</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">fuzzyCO2</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Plant=Qn1"            "Plant=Qn2"            "Plant=Qn3"           </span></span>
<span><span class="co">#&gt;  [4] "Plant=Qc1"            "Plant=Qc3"            "Plant=Qc2"           </span></span>
<span><span class="co">#&gt;  [7] "Plant=Mn3"            "Plant=Mn2"            "Plant=Mn1"           </span></span>
<span><span class="co">#&gt; [10] "Plant=Mc2"            "Plant=Mc3"            "Plant=Mc1"           </span></span>
<span><span class="co">#&gt; [13] "Type=Quebec"          "Type=Mississippi"     "Treatment=nonchilled"</span></span>
<span><span class="co">#&gt; [16] "Treatment=chilled"    "conc=(-Inf;175;350)"  "conc=(175;350;675)"  </span></span>
<span><span class="co">#&gt; [19] "conc=(350;675;Inf)"   "uptake=(-Inf;18;28)"  "uptake=(18;28;37)"   </span></span>
<span><span class="co">#&gt; [22] "uptake=(28;37;Inf)"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="pre-defined-patterns">Pre-defined Patterns<a class="anchor" aria-label="anchor" href="#pre-defined-patterns"></a>
</h2>
<p><code>nuggets</code> provides a set of functions for searching for
some best-known pattern types. These functions allow to process Boolean
data, fuzzy data, or both. The result of these functions is always a
tibble with patterns stored as rows. For more advance usage, which
allows to search for custom patterns or to compute user-defined measures
and statistics, see the section <strong>Custom Patterns</strong>.</p>
<div class="section level4">
<h4 id="search-for-implicative-rules">Search for Implicative Rules<a class="anchor" aria-label="anchor" href="#search-for-implicative-rules"></a>
</h4>
<p>Implicative patterns are rules of the form
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>⇒</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A \Rightarrow B</annotation></semantics></math>,
where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>
is either Boolean or fuzzy condition in the form of conjunction, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>B</mi><annotation encoding="application/x-tex">B</annotation></semantics></math>
is a Boolean or fuzzy predicate.</p>
<p>Before continuing with the search for rules, it is advisable to
create the so-called <em>vector of disjoints</em>. The vector of
disjoints is a character vector with the same length as the number of
columns in the analyzed dataset. It specifies predicates, which are
mutually exclusive and should not be combined together in a single
pattern’s condition: columns with equal values in the disjoint vector
will not appear in a single condition. Providing the vector of disjoints
to the algorithm will speed-up the search as it makes no sense, e.g., to
combine <code>Plant=Qn1</code> and <code>Plant=Qn2</code> in a condition
<code>Plant=Qn1 &amp; Plant=Qn2</code> as such formula is never true for
any data row.</p>
<p>The vector of disjoints can be easily created from the column names
of the dataset, e.g., by obtaining the first part of column names before
the equal sign as follows:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">disj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">"=.*"</span>, <span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">fuzzyCO2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">disj</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Plant"     "Plant"     "Plant"     "Plant"     "Plant"     "Plant"    </span></span>
<span><span class="co">#&gt;  [7] "Plant"     "Plant"     "Plant"     "Plant"     "Plant"     "Plant"    </span></span>
<span><span class="co">#&gt; [13] "Type"      "Type"      "Treatment" "Treatment" "conc"      "conc"     </span></span>
<span><span class="co">#&gt; [19] "conc"      "uptake"    "uptake"    "uptake"</span></span></code></pre></div>
<p>The function <code>dig_implications</code> takes the analyzed dataset
as its first parameter and a pair of <code>tidyselect</code> expressions
to select the column names to appear in the left-hand (antecedent) and
right-hand (consequent) side of the rule. The following command searches
for implicative rules, such that:</p>
<ul>
<li>any column except those starting with “Treatment” is in the
antecedent;</li>
<li>any column starting with “Treatment” is in the consequent;</li>
<li>the minimum support is 0.02 (support is the proportion of rows that
satisfy the antecedent AND consequent));</li>
<li>the minimum confidence is 0.8 (confidence is the proportion of rows
satisfying the consequent GIVEN the antecedent is true).</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dig_implications.html">dig_implications</a></span><span class="op">(</span><span class="va">fuzzyCO2</span>,</span>
<span>                           antecedent <span class="op">=</span> <span class="op">!</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"Treatment"</span><span class="op">)</span>,</span>
<span>                           consequent <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"Treatment"</span><span class="op">)</span>,</span>
<span>                           disjoint <span class="op">=</span> <span class="va">disj</span>,</span>
<span>                           min_support <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>                           min_confidence <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></code></pre></div>
<p>The result is a tibble with found rules. We may arrange it by support
in descending order:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">arrange</span><span class="op">(</span><span class="va">result</span>, <span class="fu">desc</span><span class="op">(</span><span class="va">support</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 188 × 8</span></span></span>
<span><span class="co">#&gt;    antecedent        consequent support confidence coverage conseq_support count</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> {Type=Mississipp… {Treatmen…  0.135       0.895   0.151             0.5  11.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> {Plant=Mc3}       {Treatmen…  0.083<span style="text-decoration: underline;">3</span>      1       0.083<span style="text-decoration: underline;">3</span>            0.5   7  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> {Plant=Mc1}       {Treatmen…  0.083<span style="text-decoration: underline;">3</span>      1       0.083<span style="text-decoration: underline;">3</span>            0.5   7  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> {Plant=Qn1}       {Treatmen…  0.083<span style="text-decoration: underline;">3</span>      1       0.083<span style="text-decoration: underline;">3</span>            0.5   7  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> {Plant=Mc2}       {Treatmen…  0.083<span style="text-decoration: underline;">3</span>      1       0.083<span style="text-decoration: underline;">3</span>            0.5   7  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> {Plant=Mn1}       {Treatmen…  0.083<span style="text-decoration: underline;">3</span>      1       0.083<span style="text-decoration: underline;">3</span>            0.5   7  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> {Plant=Mn2}       {Treatmen…  0.083<span style="text-decoration: underline;">3</span>      1       0.083<span style="text-decoration: underline;">3</span>            0.5   7  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> {Plant=Mn3}       {Treatmen…  0.083<span style="text-decoration: underline;">3</span>      1       0.083<span style="text-decoration: underline;">3</span>            0.5   7  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> {Plant=Qc2}       {Treatmen…  0.083<span style="text-decoration: underline;">3</span>      1       0.083<span style="text-decoration: underline;">3</span>            0.5   7  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> {Plant=Qc3}       {Treatmen…  0.083<span style="text-decoration: underline;">3</span>      1       0.083<span style="text-decoration: underline;">3</span>            0.5   7  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 178 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: antecedent_length &lt;int&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="conditional-correlations">Conditional Correlations<a class="anchor" aria-label="anchor" href="#conditional-correlations"></a>
</h3>
<p>TBD (<code>dig_correlations</code>)</p>
</div>
<div class="section level3">
<h3 id="contrast-patterns">Contrast Patterns<a class="anchor" aria-label="anchor" href="#contrast-patterns"></a>
</h3>
<p>TBD (<code>dig_contrasts</code>)</p>
</div>
</div>
<div class="section level2">
<h2 id="custom-patterns">Custom Patterns<a class="anchor" aria-label="anchor" href="#custom-patterns"></a>
</h2>
<p>The <code>nuggets</code> package allows to execute a user-defined
callback function on each generated frequent condition. That way a
custom type of patterns may be searched. The following example
replicates the search for implicative rules with the custom callback
function. For that, a dataset has to be dichotomized and the disjoint
vector created as in the <strong>Data Preparation</strong> section
above:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">fuzzyCO2</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 22</span></span></span>
<span><span class="co">#&gt;   `Plant=Qn1` `Plant=Qn2` `Plant=Qn3` `Plant=Qc1` `Plant=Qc3` `Plant=Qc2`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> TRUE        FALSE       FALSE       FALSE       FALSE       FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 16 more variables: `Plant=Mn3` &lt;lgl&gt;, `Plant=Mn2` &lt;lgl&gt;, `Plant=Mn1` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Plant=Mc2` &lt;lgl&gt;, `Plant=Mc3` &lt;lgl&gt;, `Plant=Mc1` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Type=Quebec` &lt;lgl&gt;, `Type=Mississippi` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Treatment=nonchilled` &lt;lgl&gt;, `Treatment=chilled` &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `conc=(-Inf;175;350)` &lt;dbl&gt;, `conc=(175;350;675)` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `conc=(350;675;Inf)` &lt;dbl&gt;, `uptake=(-Inf;18;28)` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `uptake=(18;28;37)` &lt;dbl&gt;, `uptake=(28;37;Inf)` &lt;dbl&gt;</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">disj</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Plant"     "Plant"     "Plant"     "Plant"     "Plant"     "Plant"    </span></span>
<span><span class="co">#&gt;  [7] "Plant"     "Plant"     "Plant"     "Plant"     "Plant"     "Plant"    </span></span>
<span><span class="co">#&gt; [13] "Type"      "Type"      "Treatment" "Treatment" "conc"      "conc"     </span></span>
<span><span class="co">#&gt; [19] "conc"      "uptake"    "uptake"    "uptake"</span></span></code></pre></div>
<p>As we want to search for implicative rules with some minimum support
and confidence, we define the variables to hold that thresholds. We also
need to define a callback function that will be called for each found
frequent condition. Its purpose is to generate the rules with the
obtained condition as an antecedent:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">min_support</span> <span class="op">&lt;-</span> <span class="fl">0.02</span></span>
<span><span class="va">min_confidence</span> <span class="op">&lt;-</span> <span class="fl">0.8</span></span>
<span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">support</span>, <span class="va">foci_supports</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">conf</span> <span class="op">&lt;-</span> <span class="va">foci_supports</span> <span class="op">/</span> <span class="va">support</span></span>
<span>    <span class="va">sel</span> <span class="op">&lt;-</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">conf</span> <span class="op">&gt;=</span> <span class="va">min_confidence</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">foci_supports</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">foci_supports</span> <span class="op">&gt;=</span> <span class="va">min_support</span></span>
<span>    <span class="va">conf</span> <span class="op">&lt;-</span> <span class="va">conf</span><span class="op">[</span><span class="va">sel</span><span class="op">]</span></span>
<span>    <span class="va">supp</span> <span class="op">&lt;-</span> <span class="va">foci_supports</span><span class="op">[</span><span class="va">sel</span><span class="op">]</span></span>
<span>    </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>antecedent <span class="op">=</span> <span class="fu"><a href="../reference/format_condition.html">format_condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">condition</span><span class="op">)</span><span class="op">)</span>,</span>
<span>           consequent <span class="op">=</span> <span class="fu"><a href="../reference/format_condition.html">format_condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>           support <span class="op">=</span> <span class="va">supp</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>,</span>
<span>           confidence <span class="op">=</span> <span class="va">conf</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The callback function <code>f()</code> defines three arguments:
<code>condition</code>, <code>support</code> and
<code>foci_supports</code>. The names of the arguments are not random.
Based on the argument names of the callback function, the searching
algorithm provides information to the function. Here
<code>condition</code> is a vector of indices representing the
conjunction of predicates in a condition. By the predicate we mean the
column in the source dataset. The <code>support</code> argument gets the
relative frequency of the condition in the dataset.
<code>foci_supports</code> is a vector of supports of special
predicates, which we call “foci” (plural of “focus”), within the rows
satisfying the condition. For implicative rules, foci are potential rule
consequents.</p>
<p>Now we can run the digging for rules:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dig.html">dig</a></span><span class="op">(</span><span class="va">fuzzyCO2</span>,</span>
<span>              f <span class="op">=</span> <span class="va">f</span>,</span>
<span>              condition <span class="op">=</span> <span class="op">!</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"Treatment"</span><span class="op">)</span>,</span>
<span>              focus <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"Treatment"</span><span class="op">)</span>,</span>
<span>              disjoint <span class="op">=</span> <span class="va">disj</span>,</span>
<span>              min_length <span class="op">=</span> <span class="fl">1</span>,</span>
<span>              min_support <span class="op">=</span> <span class="va">min_support</span><span class="op">)</span></span></code></pre></div>
<p>As we return a list of lists in the callback function, we have to
flatten the first level of lists in the result and binding it into a
data frame:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="va">result</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span>recursive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">map</span><span class="op">(</span><span class="va">as_tibble</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, args <span class="op">=</span> <span class="va">_</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">support</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 188 × 4</span></span></span>
<span><span class="co">#&gt;    antecedent                           consequent            support confidence</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> {Type=Mississippi,uptake=(18;28;37)} {Treatment=nonchille…  0.135       0.895</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> {Plant=Mc3}                          {Treatment=chilled}    0.083<span style="text-decoration: underline;">3</span>      1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> {Plant=Mc1}                          {Treatment=chilled}    0.083<span style="text-decoration: underline;">3</span>      1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> {Plant=Qn1}                          {Treatment=nonchille…  0.083<span style="text-decoration: underline;">3</span>      1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> {Plant=Mc2}                          {Treatment=chilled}    0.083<span style="text-decoration: underline;">3</span>      1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> {Plant=Mn1}                          {Treatment=nonchille…  0.083<span style="text-decoration: underline;">3</span>      1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> {Plant=Mn2}                          {Treatment=nonchille…  0.083<span style="text-decoration: underline;">3</span>      1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> {Plant=Mn3}                          {Treatment=nonchille…  0.083<span style="text-decoration: underline;">3</span>      1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> {Plant=Qc2}                          {Treatment=chilled}    0.083<span style="text-decoration: underline;">3</span>      1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> {Plant=Qc3}                          {Treatment=chilled}    0.083<span style="text-decoration: underline;">3</span>      1    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 178 more rows</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michal Burda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>

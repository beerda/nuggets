<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>nuggets: Get Started • nuggets</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="nuggets: Get Started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nuggets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/nuggets.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/data-preparation.html">Data Preparation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/beerda/nuggets/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>nuggets: Get Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/beerda/nuggets/blob/main/vignettes/nuggets.Rmd" class="external-link"><code>vignettes/nuggets.Rmd</code></a></small>
      <div class="d-none name"><code>nuggets.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Package <code>nuggets</code> searches for patterns that can be
expressed as formulae in the form of elementary conjunctions, referred
to in this text as <em>conditions</em>. Conditions are constructed from
<em>predicates</em>, which correspond to data columns. The
interpretation of conditions depends on the choice of underlying
logic:</p>
<ul>
<li><p><em>Crisp (Boolean) logic</em>: each predicate takes values
<code>TRUE</code> (1) or <code>FALSE</code> (0). The truth value of a
condition is computed according to the rules of classical Boolean
algebra.</p></li>
<li>
<p><em>Fuzzy logic</em>: each predicate is assigned a <em>truth
degree</em> from the interval <span class="math inline">\([0,
1]\)</span>. The truth degree of a conjunction is then computed using a
chosen <em>triangular norm (t-norm)</em>. The package supports three
common t-norms, which are defined for predicates’ truth degrees <span class="math inline">\(a, b \in [0, 1]\)</span> as follows:</p>
<ul>
<li>
<em>Gödel</em> (minimum) t-norm: <span class="math inline">\(\min(a,
b)\)</span> ;</li>
<li>
<em>Goguen</em> (product) t-norm: <span class="math inline">\(a
\cdot b\)</span> ;</li>
<li>
<em>Łukasiewicz</em> t-norm: <span class="math inline">\(\max(0, a +
b - 1)\)</span>
</li>
</ul>
</li>
</ul>
<p>Before applying <code>nuggets</code>, data columns intended as
predicates must be prepared either by <em>dichotomization</em>
(conversion into <em>dummy variables</em>) or by transformation into
<em>fuzzy sets</em>. The package provides functions for both
transformations. See the <a href="data-preparation.html">Data
Preparation</a> vignette for a comprehensive guide, or the section <a href="#data-preparation">Data Preparation</a> below for a quick
overview.</p>
<p><code>nuggets</code> implements functions to search for pre-defined
types of patterns, for example:</p>
<ul>
<li>
<code><a href="../reference/dig_associations.html">dig_associations()</a></code> for association rules,</li>
<li>
<code><a href="../reference/dig_baseline_contrasts.html">dig_baseline_contrasts()</a></code>,
<code><a href="../reference/dig_complement_contrasts.html">dig_complement_contrasts()</a></code>, and
<code><a href="../reference/dig_paired_baseline_contrasts.html">dig_paired_baseline_contrasts()</a></code> for various contrast
patterns on numeric variables,</li>
<li>
<code><a href="../reference/dig_correlations.html">dig_correlations()</a></code> for conditional correlations.</li>
</ul>
<p>See <a href="#pre-defined-patterns">Pre-defined Patterns</a> below
for further details.</p>
<p>Discovered rules and patterns can be post-processed, visualized, and
explored interactively. Section <a href="#post-processing-and-visualization">Post-processing and
Visualization</a> describes these features.</p>
<p>Finally, the package allows users to provide custom evaluation
functions for conditions and to search for <em>user-defined</em> types
of patterns:</p>
<ul>
<li>
<code><a href="../reference/dig.html">dig()</a></code> is a general function for searching arbitrary
pattern types.</li>
<li>
<code><a href="../reference/dig_grid.html">dig_grid()</a></code> is a wrapper around <code><a href="../reference/dig.html">dig()</a></code> for
patterns defined by conditions and a pair of columns evaluated by a
user-defined function.</li>
</ul>
<p>See <a href="#custom-patterns">Custom Patterns</a> for more
information.</p>
</div>
<div class="section level2">
<h2 id="data-preparation">Data Preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h2>
<p>Before applying <code>nuggets</code>, data columns intended as
predicates must be prepared either by <em>dichotomization</em>
(conversion into <em>dummy variables</em>) or by transformation into
<em>fuzzy sets</em>. The package provides the <code><a href="../reference/partition.html">partition()</a></code>
function for both transformations.</p>
<p>For a detailed guide to data preparation, including information about
all available functions and advanced techniques, please see the <a href="data-preparation.html">Data Preparation</a> vignette.</p>
<div class="section level3">
<h3 id="crisp-boolean-predicates-example">Crisp (Boolean) Predicates Example<a class="anchor" aria-label="anchor" href="#crisp-boolean-predicates-example"></a>
</h3>
<p>For crisp patterns, numeric columns are transformed to logical
(<code>TRUE</code>/<code>FALSE</code>) columns. Here’s a quick example
using the built-in <code>mtcars</code> dataset:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Transform the whole dataset to crisp predicates</span></span>
<span><span class="co"># First, convert cyl to a factor for illustration</span></span>
<span><span class="va">crisp_mtcars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>cyl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">cyl</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span><span class="op">)</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"four"</span>, <span class="st">"six"</span>, <span class="st">"eight"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">cyl</span>, <span class="va">vs</span><span class="op">:</span><span class="va">gear</span>, .method <span class="op">=</span> <span class="st">"dummy"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">mpg</span>, .method <span class="op">=</span> <span class="st">"crisp"</span>, .breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">disp</span><span class="op">:</span><span class="va">carb</span>, .method <span class="op">=</span> <span class="st">"crisp"</span>, .breaks <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">crisp_mtcars</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 32</span></span></span>
<span><span class="co">#&gt;   `cyl=four` `cyl=six` `cyl=eight` `vs=0` `vs=1` `am=0` `am=1` `gear=3` `gear=4`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> TRUE       FALSE     FALSE       FALSE  TRUE   FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt;   `gear=5` `mpg=(-Inf;15]` `mpg=(15;20]` `mpg=(20;30]` `mpg=(30;Inf]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE    FALSE           FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE    FALSE           FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE    FALSE           FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt;   `disp=(-Inf;205]` `disp=(205;338]` `disp=(338;Inf]` `hp=(-Inf;146]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TRUE              FALSE            FALSE            TRUE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRUE              FALSE            FALSE            TRUE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> TRUE              FALSE            FALSE            TRUE           </span></span>
<span><span class="co">#&gt;   `hp=(146;241]` `hp=(241;Inf]` `drat=(-Inf;3.48]` `drat=(3.48;4.21]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE          FALSE          FALSE              TRUE              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE          FALSE          FALSE              TRUE              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE          FALSE          FALSE              TRUE              </span></span>
<span><span class="co">#&gt;   `drat=(4.21;Inf]` `wt=(-Inf;2.82]` `wt=(2.82;4.12]` `wt=(4.12;Inf]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE             TRUE             FALSE            FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE             FALSE            TRUE             FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE             TRUE             FALSE            FALSE          </span></span>
<span><span class="co">#&gt;   `qsec=(-Inf;17.3]` `qsec=(17.3;20.1]` `qsec=(20.1;Inf]` `carb=(-Inf;3.33]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TRUE               FALSE              FALSE             FALSE             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRUE               FALSE              FALSE             FALSE             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE              TRUE               FALSE             TRUE              </span></span>
<span><span class="co">#&gt;   `carb=(3.33;5.67]` `carb=(5.67;Inf]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TRUE               FALSE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRUE               FALSE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE              FALSE</span></span></code></pre></div>
<p>Now all columns are logical and can be used as predicates in crisp
conditions.</p>
</div>
<div class="section level3">
<h3 id="fuzzy-predicates-example">Fuzzy Predicates Example<a class="anchor" aria-label="anchor" href="#fuzzy-predicates-example"></a>
</h3>
<p>Fuzzy predicates express the degree to which a condition is
satisfied, with values in the interval <span class="math inline">\([0,1]\)</span>. This allows modeling of smooth
transitions between categories:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Start with fresh mtcars and transform to fuzzy predicates</span></span>
<span><span class="va">fuzzy_mtcars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>cyl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">cyl</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span><span class="op">)</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"four"</span>, <span class="st">"six"</span>, <span class="st">"eight"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">cyl</span>, <span class="va">vs</span><span class="op">:</span><span class="va">gear</span>, .method <span class="op">=</span> <span class="st">"dummy"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">mpg</span>, .method <span class="op">=</span> <span class="st">"triangle"</span>, .breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">disp</span><span class="op">:</span><span class="va">carb</span>, .method <span class="op">=</span> <span class="st">"triangle"</span>, .breaks <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">fuzzy_mtcars</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 31</span></span></span>
<span><span class="co">#&gt;   `cyl=four` `cyl=six` `cyl=eight` `vs=0` `vs=1` `am=0` `am=1` `gear=3` `gear=4`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> TRUE       FALSE     FALSE       FALSE  TRUE   FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt;   `gear=5` `mpg=(-Inf;15;20)` `mpg=(15;20;30)` `mpg=(20;30;Inf)`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE                     0             0.9               0.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE                     0             0.9               0.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE                     0             0.72              0.28</span></span>
<span><span class="co">#&gt;   `disp=(-Inf;71.1;272)` `disp=(71.1;272;472)` `disp=(272;472;Inf)`</span></span>
<span><span class="co">#&gt;                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  0.557                 0.443                    0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  0.557                 0.443                    0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                  0.816                 0.184                    0</span></span>
<span><span class="co">#&gt;   `hp=(-Inf;52;194)` `hp=(52;194;335)` `hp=(194;335;Inf)`</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>              0.592             0.408                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>              0.592             0.408                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>              0.711             0.289                  0</span></span>
<span><span class="co">#&gt;   `drat=(-Inf;2.76;3.84)` `drat=(2.76;3.84;4.93)` `drat=(3.84;4.93;Inf)`</span></span>
<span><span class="co">#&gt;                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                       0                   0.945                0.055<span style="text-decoration: underline;">0</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                       0                   0.945                0.055<span style="text-decoration: underline;">0</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                       0                   0.991                0.009<span style="text-decoration: underline;">17</span></span></span>
<span><span class="co">#&gt;   `wt=(-Inf;1.51;3.47)` `wt=(1.51;3.47;5.42)` `wt=(3.47;5.42;Inf)`</span></span>
<span><span class="co">#&gt;                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                 0.434                 0.566                    0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                 0.304                 0.696                    0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                 0.587                 0.413                    0</span></span>
<span><span class="co">#&gt;   `qsec=(-Inf;14.5;18.7)` `qsec=(14.5;18.7;22.9)` `qsec=(18.7;22.9;Inf)`</span></span>
<span><span class="co">#&gt;                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  0.533                    0.467                      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  0.4                      0.6                        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                  0.021<span style="text-decoration: underline;">4</span>                   0.979                      0</span></span>
<span><span class="co">#&gt;   `carb=(-Inf;1;4.5)` `carb=(1;4.5;8)` `carb=(4.5;8;Inf)`</span></span>
<span><span class="co">#&gt;                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>               0.143            0.857                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>               0.143            0.857                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>               1                0                      0</span></span></code></pre></div>
<p>Note that the <code>cyl</code>, <code>vs</code>, <code>am</code>, and
<code>gear</code> columns are still represented by dummy logical
columns, while the numeric columns are now represented by fuzzy sets.
This combination allows both crisp and fuzzy predicates to be used
together in pattern discovery.</p>
</div>
<div class="section level3">
<h3 id="advanced-data-preparation-capabilities">Advanced Data Preparation Capabilities<a class="anchor" aria-label="anchor" href="#advanced-data-preparation-capabilities"></a>
</h3>
<p>The <code>nuggets</code> package provides powerful and flexible data
preparation tools. The <a href="data-preparation.html">Data
Preparation</a> vignette covers these capabilities in depth,
including:</p>
<ul>
<li>
<strong>Crisp (Boolean) partitioning</strong> with customizable
interval strategies:
<ul>
<li>Equal-width intervals for uniform discretization</li>
<li>Data-driven methods (quantile, k-means, hierarchical clustering,
etc.) for optimal breakpoints that respect the data structure</li>
<li>Custom breakpoints for domain-specific intervals</li>
</ul>
</li>
<li>
<strong>Fuzzy partitioning</strong> for modeling gradual transitions
and uncertainty:
<ul>
<li>Triangular membership functions for basic fuzzy sets</li>
<li>Raised-cosine membership functions for smoother transitions</li>
<li>Trapezoidal shapes using <code>.span</code> and <code>.inc</code>
parameters for overlapping fuzzy sets</li>
</ul>
</li>
<li>
<strong>Quality control utilities</strong> to improve pattern
mining:
<ul>
<li>
<code><a href="../reference/is_almost_constant.html">is_almost_constant()</a></code> and
<code><a href="../reference/remove_almost_constant.html">remove_almost_constant()</a></code> to identify and filter
uninformative columns</li>
<li>
<code><a href="../reference/dig_tautologies.html">dig_tautologies()</a></code> to find always-true rules that can be
used to prune search spaces</li>
</ul>
</li>
<li>
<strong>Custom labels</strong> for predicates to make discovered
patterns more interpretable</li>
</ul>
<p>For example, you can use quantile-based partitioning to ensure
balanced predicates, or use raised-cosine fuzzy sets with custom labels
to create meaningful linguistic terms like “very_low”, “low”, “medium”,
“high”, and “very_high”. These preparation choices significantly impact
the interpretability and usefulness of patterns discovered in subsequent
analyses.</p>
</div>
</div>
<div class="section level2">
<h2 id="pre-defined-patterns">Pre-defined Patterns<a class="anchor" aria-label="anchor" href="#pre-defined-patterns"></a>
</h2>
<p>The package <code>nuggets</code> provides a set of functions for
discovering some of the best-known pattern types. These functions can
process Boolean data, fuzzy data, or both. Each function returns a
tibble, where every row represents one detected pattern.</p>
<blockquote>
<p><strong>Note:</strong> This section assumes that the data have
already been <strong>preprocessed</strong> — i.e., transformed into a
binarized or fuzzified form. See the previous section <a href="#data-preparation">Data Preparation</a> for details on how to
prepare your dataset (for example, <code>crisp_mtcars</code> and
<code>fuzzy_mtcars</code>).</p>
</blockquote>
<p>For more advanced workflows — such as defining custom pattern types
or computing user-defined measures — see the section <a href="#custom-patterns">Custom Patterns</a>.</p>
<div class="section level4">
<h4 id="search-for-association-rules">Search for Association Rules<a class="anchor" aria-label="anchor" href="#search-for-association-rules"></a>
</h4>
<p><strong>Association rules</strong> identify conditions
(<em>antecedents</em>) under which a specific feature
(<em>consequent</em>) is present very often.</p>
<p><span class="math display">\[
A \Rightarrow C
\]</span></p>
<p>If condition <code>A</code> is satisfied, then the feature
<code>C</code> tends to be present.</p>
<p>For example,<br><code>university_edu &amp; middle_age &amp; IT_industry =&gt; high_income</code><br>
can be read as:<br><em>People in middle age with university education working in IT
industry are very likely to have a high income.</em></p>
<p>In practice, the antecedent <code>A</code> is a set of predicates,
and the consequent <code>C</code> is usually a single predicate.</p>
<p>For a set of predicates <span class="math inline">\(I\)</span>, let
<span class="math inline">\(\text{supp}(I)\)</span> denote the
<em>support</em> — the relative frequency (for logical data) or the mean
truth degree (for fuzzy data) of rows satisfying all predicates in <span class="math inline">\(I\)</span>. Using this notation:</p>
<ul>
<li>
<strong>Length</strong> — number of predicates in the
antecedent.<br>
</li>
<li>
<strong>Coverage</strong> — <span class="math inline">\(\text{supp}(A)\)</span>.<br>
</li>
<li>
<strong>Consequent support</strong> — <span class="math inline">\(\text{supp}(\{c\})\)</span>.<br>
</li>
<li>
<strong>Support</strong> — <span class="math inline">\(\text{supp}(A
\cup \{c\})\)</span>.<br>
</li>
<li>
<strong>Confidence</strong> — <span class="math inline">\(\text{supp}(A \cup \{c\}) /
\text{supp}(A)\)</span>.</li>
</ul>
<p>Optional additional measures (<code>"lift"</code>,
<code>"conviction"</code>, <code>"added_value"</code>) can be computed
using the <code>measures</code> argument.</p>
<p>Before searching for rules, it is recommended to create a <em>vector
of disjoints</em>, which specifies predicates that must not appear
together in the same condition. This vector should have the same length
as the number of dataset columns.</p>
<p>For example, columns representing <code>gear=3</code> and
<code>gear=4</code> are mutually exclusive, so their shared group label
in <code>disj</code> prevents meaningless conditions like
<code>gear=3 &amp; gear=4</code>. You can conveniently generate this
vector with <code><a href="../reference/var_names.html">var_names()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">disj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/var_names.html">var_names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">fuzzy_mtcars</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">disj</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "cyl"  "cyl"  "cyl"  "vs"   "vs"   "am"   "am"   "gear" "gear" "gear"</span></span>
<span><span class="co">#&gt; [11] "mpg"  "mpg"  "mpg"  "disp" "disp" "disp" "hp"   "hp"   "hp"   "drat"</span></span>
<span><span class="co">#&gt; [21] "drat" "drat" "wt"   "wt"   "wt"   "qsec" "qsec" "qsec" "carb" "carb"</span></span>
<span><span class="co">#&gt; [31] "carb"</span></span></code></pre></div>
<p>The <code><a href="../reference/dig_associations.html">dig_associations()</a></code> function searches for association
rules. Its main arguments are:</p>
<ul>
<li>
<code>x</code>: the data matrix or data frame (logical or
numeric);</li>
<li>
<code>antecedent</code>, <code>consequent</code>: tidyselect
expressions selecting columns for each side of the rule;</li>
<li>
<code>disjoint</code>: a vector defining mutually exclusive
predicates;</li>
<li>rule filtering thresholds such as <code>min_support</code>,
<code>min_confidence</code>, <code>min_coverage</code>, and limits like
<code>min_length</code>, <code>max_length</code>;</li>
<li>optional parameters such as <code>measures</code>,
<code>t_norm</code>, and <code>contingency_table</code>.</li>
</ul>
<p>In the following example, we search for fuzzy association rules in
the dataset <code>fuzzy_mtcars</code>, such that: - any column except
those starting with <code>"am"</code> may appear in the antecedent; -
columns starting with <code>"am"</code> may appear in the consequent; -
minimum support is <code>0.02</code>; - minimum confidence is
<code>0.8</code>; - additional quality measures <code>"lift"</code> and
<code>"conviction"</code> are computed.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dig_associations.html">dig_associations</a></span><span class="op">(</span><span class="va">fuzzy_mtcars</span>,</span>
<span>                           antecedent <span class="op">=</span> <span class="op">!</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"am"</span><span class="op">)</span>,</span>
<span>                           consequent <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"am"</span><span class="op">)</span>,</span>
<span>                           disjoint <span class="op">=</span> <span class="va">disj</span>,</span>
<span>                           min_support <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>                           min_confidence <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>                           measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lift"</span>, <span class="st">"conviction"</span><span class="op">)</span>,</span>
<span>                           contingency_table <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The result is a tibble containing the discovered rules and their
quality metrics. You can arrange them, for example, by decreasing
support:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">arrange</span><span class="op">(</span><span class="va">result</span>, <span class="fu">desc</span><span class="op">(</span><span class="va">support</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 526 × 14</span></span></span>
<span><span class="co">#&gt;    antecedent                     consequent support confidence coverage</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> {gear=3}                       {am=0}       0.469      1        0.469</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> {gear=3,vs=0}                  {am=0}       0.375      1        0.375</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> {cyl=eight,gear=3,vs=0}        {am=0}       0.375      1        0.375</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> {cyl=eight,vs=0}               {am=0}       0.375      0.857    0.438</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> {cyl=eight,gear=3}             {am=0}       0.375      1        0.375</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> {cyl=eight}                    {am=0}       0.375      0.857    0.438</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> {mpg=(-Inf;15;20)}             {am=0}       0.327      0.847    0.387</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> {drat=(-Inf;2.76;3.84)}        {am=0}       0.311      0.948    0.328</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> {gear=3,mpg=(-Inf;15;20)}      {am=0}       0.309      1        0.309</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> {drat=(-Inf;2.76;3.84),gear=3} {am=0}       0.307      1        0.307</span></span>
<span><span class="co">#&gt;    conseq_support count antecedent_length    pp    pn    np    nn  lift</span></span>
<span><span class="co">#&gt;             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>          0.594 15                    1 15    0      4     13    1.68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>          0.594 12                    2 12    0      7     13    1.68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>          0.594 12                    3 12    0      7     13    1.68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>          0.594 12                    2 12    2      7     11    1.44</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>          0.594 12                    2 12    0      7     13    1.68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>          0.594 12                    1 12    2      7     11    1.44</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>          0.594 10.5                  1 10.5  1.90   8.52  11.1  1.43</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>          0.594  9.96                 1  9.96 0.546  9.04  12.5  1.60</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>          0.594  9.88                 2  9.88 0      9.12  13.0  1.68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>          0.594  9.82                 2  9.82 0      9.18  13    1.68</span></span>
<span><span class="co">#&gt;    conviction</span></span>
<span><span class="co">#&gt;         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     <span style="color: #BB0000;">Inf</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     <span style="color: #BB0000;">Inf</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     <span style="color: #BB0000;">Inf</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       2.84</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     <span style="color: #BB0000;">Inf</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       2.84</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       2.65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       7.82</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     <span style="color: #BB0000;">Inf</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     <span style="color: #BB0000;">Inf</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 516 more rows</span></span></span></code></pre></div>
<p>This example illustrates the typical workflow for mining association
rules with <code>nuggets</code>. The same structure and arguments apply
when analyzing either fuzzy or Boolean datasets.</p>
</div>
<div class="section level3">
<h3 id="conditional-correlations">Conditional Correlations<a class="anchor" aria-label="anchor" href="#conditional-correlations"></a>
</h3>
<p>TBD (<code>dig_correlations</code>)</p>
</div>
<div class="section level3">
<h3 id="contrast-patterns">Contrast Patterns<a class="anchor" aria-label="anchor" href="#contrast-patterns"></a>
</h3>
<p>TBD (<code>dig_contrasts</code>)</p>
</div>
</div>
<div class="section level2">
<h2 id="post-processing-and-visualization">Post-processing and Visualization<a class="anchor" aria-label="anchor" href="#post-processing-and-visualization"></a>
</h2>
<p>TBD</p>
</div>
<div class="section level2">
<h2 id="custom-patterns">Custom Patterns<a class="anchor" aria-label="anchor" href="#custom-patterns"></a>
</h2>
<p>The <code>nuggets</code> package allows to execute a user-defined
callback function on each generated frequent condition. That way a
custom type of patterns may be searched. The following example
replicates the search for associations rules with the custom callback
function. For that, a dataset has to be dichotomized and the disjoint
vector created as in the <strong>Data Preparation</strong> section
above:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#head(fuzzyCO2)</span></span>
<span><span class="co">#print(disj)</span></span></code></pre></div>
<p>As we want to search for associations rules with some minimum support
and confidence, we define the variables to hold that thresholds. We also
need to define a callback function that will be called for each found
frequent condition. Its purpose is to generate the rules with the
obtained condition as an antecedent:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">min_support</span> <span class="op">&lt;-</span> <span class="fl">0.02</span></span>
<span><span class="va">min_confidence</span> <span class="op">&lt;-</span> <span class="fl">0.8</span></span>
<span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">support</span>, <span class="va">foci_supports</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">conf</span> <span class="op">&lt;-</span> <span class="va">foci_supports</span> <span class="op">/</span> <span class="va">support</span></span>
<span>    <span class="va">sel</span> <span class="op">&lt;-</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">conf</span> <span class="op">&gt;=</span> <span class="va">min_confidence</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">foci_supports</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">foci_supports</span> <span class="op">&gt;=</span> <span class="va">min_support</span></span>
<span>    <span class="va">conf</span> <span class="op">&lt;-</span> <span class="va">conf</span><span class="op">[</span><span class="va">sel</span><span class="op">]</span></span>
<span>    <span class="va">supp</span> <span class="op">&lt;-</span> <span class="va">foci_supports</span><span class="op">[</span><span class="va">sel</span><span class="op">]</span></span>
<span>    </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>antecedent <span class="op">=</span> <span class="fu"><a href="../reference/format_condition.html">format_condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">condition</span><span class="op">)</span><span class="op">)</span>,</span>
<span>           consequent <span class="op">=</span> <span class="fu"><a href="../reference/format_condition.html">format_condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>           support <span class="op">=</span> <span class="va">supp</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>,</span>
<span>           confidence <span class="op">=</span> <span class="va">conf</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The callback function <code>f()</code> defines three arguments:
<code>condition</code>, <code>support</code> and
<code>foci_supports</code>. The names of the arguments are not random.
Based on the argument names of the callback function, the searching
algorithm provides information to the function. Here
<code>condition</code> is a vector of indices representing the
conjunction of predicates in a condition. By the predicate we mean the
column in the source dataset. The <code>support</code> argument gets the
relative frequency of the condition in the dataset.
<code>foci_supports</code> is a vector of supports of special
predicates, which we call “foci” (plural of “focus”), within the rows
satisfying the condition. For associations rules, foci are potential
rule consequents.</p>
<p>Now we can run the digging for rules:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#result &lt;- dig(fuzzyCO2,</span></span>
<span>              <span class="co">#f = f,</span></span>
<span>              <span class="co">#condition = !starts_with("Treatment"),</span></span>
<span>              <span class="co">#focus = starts_with("Treatment"),</span></span>
<span>              <span class="co">#disjoint = disj,</span></span>
<span>              <span class="co">#min_length = 1,</span></span>
<span>              <span class="co">#min_support = min_support)</span></span></code></pre></div>
<p>As we return a list of lists in the callback function, we have to
flatten the first level of lists in the result and binding it into a
data frame:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#result &lt;- result |&gt;</span></span>
<span>  <span class="co">#unlist(recursive = FALSE) |&gt;</span></span>
<span>  <span class="co">#lapply(as_tibble) |&gt;</span></span>
<span>  <span class="co">#do.call(rbind, args = _) |&gt;</span></span>
<span>  <span class="co">#arrange(desc(support))</span></span>
<span><span class="co">#</span></span>
<span><span class="co">#print(result)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michal Burda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>

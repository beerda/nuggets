<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>nuggets: Get Started • nuggets</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="nuggets: Get Started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nuggets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/nuggets.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/beerda/nuggets/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>nuggets: Get Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/beerda/nuggets/blob/main/vignettes/nuggets.Rmd" class="external-link"><code>vignettes/nuggets.Rmd</code></a></small>
      <div class="d-none name"><code>nuggets.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Package <code>nuggets</code> searches for patterns that can be
expressed as formulae in the form of elementary conjunctions, referred
to in this text as <em>conditions</em>. Conditions are constructed from
<em>predicates</em>, which correspond to data columns. The
interpretation of conditions depends on the choice of underlying
logic:</p>
<ul>
<li><p><em>Crisp (Boolean) logic</em>: each predicate takes values
<code>TRUE</code> (1) or <code>FALSE</code> (0). The truth value of a
condition is computed according to the rules of classical Boolean
algebra.</p></li>
<li>
<p><em>Fuzzy logic</em>: each predicate is assigned a <em>truth
degree</em> from the interval <span class="math inline">\([0,
1]\)</span>. The truth degree of a conjunction is then computed using a
chosen <em>triangular norm (t-norm)</em>. The package supports three
common t-norms, which are defined for predicates’ truth degrees <span class="math inline">\(a, b \in [0, 1]\)</span> as follows:</p>
<ul>
<li>
<em>Gödel</em> (minimum) t-norm: <span class="math inline">\(\min(a,
b)\)</span> ;</li>
<li>
<em>Goguen</em> (product) t-norm: <span class="math inline">\(a
\cdot b\)</span> ;</li>
<li>
<em>Łukasiewicz</em> t-norm: <span class="math inline">\(\max(0, a +
b - 1)\)</span>
</li>
</ul>
</li>
</ul>
<p>Before applying <code>nuggets</code>, data columns intended as
predicates must be prepared either by <em>dichotomization</em>
(conversion into <em>dummy variables</em>) or by transformation into
<em>fuzzy sets</em>. The package provides functions for both
transformations. See the section <a href="#data-preparation">Data
Preparation</a> below for more details.</p>
<p><code>nuggets</code> implements functions to search for pre-defined
types of patterns, for example:</p>
<ul>
<li>
<code><a href="../reference/dig_associations.html">dig_associations()</a></code> for association rules,</li>
<li>
<code><a href="../reference/dig_baseline_contrasts.html">dig_baseline_contrasts()</a></code>,
<code><a href="../reference/dig_complement_contrasts.html">dig_complement_contrasts()</a></code>, and
<code><a href="../reference/dig_paired_baseline_contrasts.html">dig_paired_baseline_contrasts()</a></code> for various contrast
patterns on numeric variables,</li>
<li>
<code><a href="../reference/dig_correlations.html">dig_correlations()</a></code> for conditional correlations.</li>
</ul>
<p>See <a href="#pre-defined-patterns">Pre-defined Patterns</a> below
for further details.</p>
<p>Discovered rules and patterns can be post-processed, visualized, and
explored interactively. Section <a href="#post-processing-and-visualization">Post-processing and
Visualization</a> describes these features.</p>
<p>Finally, the package allows users to provide custom evaluation
functions for conditions and to search for <em>user-defined</em> types
of patterns:</p>
<ul>
<li>
<code><a href="../reference/dig.html">dig()</a></code> is a general function for searching arbitrary
pattern types.</li>
<li>
<code><a href="../reference/dig_grid.html">dig_grid()</a></code> is a wrapper around <code><a href="../reference/dig.html">dig()</a></code> for
patterns defined by conditions and a pair of columns evaluated by a
user-defined function.</li>
</ul>
<p>See <a href="#custom-patterns">Custom Patterns</a> for more
information.</p>
</div>
<div class="section level2">
<h2 id="data-preparation">Data Preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h2>
<p>For patterns based on crisp conditions, the data columns that serve
as predicates in conditions must be transformed either to logical
(<code>TRUE</code>/<code>FALSE</code>) columns, or to fuzzy sets with
values from the interval <span class="math inline">\([0, 1]\)</span>.
The first option is simpler and faster, and it is the recommended option
for most applications. The second option is more flexible and allows to
model uncertainty in data, but it is more computationally demanding.</p>
<div class="section level3">
<h3 id="preparations-of-crisp-boolean-predicates">Preparations of Crisp (Boolean) Predicates<a class="anchor" aria-label="anchor" href="#preparations-of-crisp-boolean-predicates"></a>
</h3>
<p>For patterns based on crisp conditions, the data columns that would
serve as predicates in conditions have to be transformed to logical
(<code>TRUE</code>/<code>FALSE</code>) columns. That can be done in two
ways:</p>
<ul>
<li>numeric columns can be transformed to factors with a selected number
of levels, and then</li>
<li>factors can be transformed to dummy logical columns.</li>
</ul>
<p>Both operations can be done with the help of the
<code><a href="../reference/partition.html">partition()</a></code> function. The <code><a href="../reference/partition.html">partition()</a></code> function
requires the dataset as its first argument and a <em>tidyselect</em>
selection expression to select the columns to be transformed.</p>
<p>Factors and logical columns are automatically transformed to dummy
logical columns by the <code><a href="../reference/partition.html">partition()</a></code> function. For numeric
columns, the <code><a href="../reference/partition.html">partition()</a></code> function requires the
<code>.method</code> argument to specify the method of partitioning:</p>
<ul>
<li>
<code>.method = "dummy"</code> transforms numeric columns to factors
and then to dummy logical columns. That effectively creates a separate
logical column for each distinct value of the numeric column.</li>
<li>
<code>.method = "crisp"</code> transforms numeric columns to crisp
predicates by dividing the range of values into intervals and coding the
values into dummy logical columns according to the intervals.</li>
<li>there exist other methods of partitioning of numeric columns. These
methods create fuzzy predicates and are described in the next
section.</li>
</ul>
<p>For example, consider the built-in <code>mtcars</code> dataset. This
dataset contains information about various car models. For the sake of
illustration, let us transform the <code>cyl</code> column into factor
first:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span>,</span>
<span>                     levels<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>                     labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"four"</span>, <span class="st">"six"</span>, <span class="st">"eight"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="co">#&gt;                    mpg   cyl disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; Mazda RX4         21.0   six  160 110 3.90 2.620 16.46  0  1    4    4</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag     21.0   six  160 110 3.90 2.875 17.02  0  1    4    4</span></span>
<span><span class="co">#&gt; Datsun 710        22.8  four  108  93 3.85 2.320 18.61  1  1    4    1</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    21.4   six  258 110 3.08 3.215 19.44  1  0    3    1</span></span>
<span><span class="co">#&gt; Hornet Sportabout 18.7 eight  360 175 3.15 3.440 17.02  0  0    3    2</span></span>
<span><span class="co">#&gt; Valiant           18.1   six  225 105 2.76 3.460 20.22  1  0    3    1</span></span></code></pre></div>
<p>Factors are transformed to dummy logical columns by the
<code><a href="../reference/partition.html">partition()</a></code> function automatically:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">cyl</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 32 × 13</span></span></span>
<span><span class="co">#&gt;      mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb `cyl=four`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  21    160    110  3.9   2.62  16.5     0     1     4     4 FALSE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  21    160    110  3.9   2.88  17.0     0     1     4     4 FALSE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  22.8  108     93  3.85  2.32  18.6     1     1     4     1 TRUE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  21.4  258    110  3.08  3.22  19.4     1     0     3     1 FALSE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  18.7  360    175  3.15  3.44  17.0     0     0     3     2 FALSE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  18.1  225    105  2.76  3.46  20.2     1     0     3     1 FALSE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  14.3  360    245  3.21  3.57  15.8     0     0     3     4 FALSE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  24.4  147.    62  3.69  3.19  20       1     0     4     2 TRUE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  22.8  141.    95  3.92  3.15  22.9     1     0     4     2 TRUE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  19.2  168.   123  3.92  3.44  18.3     1     0     4     4 FALSE     </span></span>
<span><span class="co">#&gt;    `cyl=six` `cyl=eight`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> TRUE      FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> TRUE      FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FALSE     FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> TRUE      FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FALSE     TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> TRUE      FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FALSE     TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FALSE     FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FALSE     FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> TRUE      FALSE      </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 22 more rows</span></span></span></code></pre></div>
<p>The <code>vs</code>, <code>am</code>, and <code>gear</code> columns
are numeric but actually represent categories. To transform them to
dummy logical columns in the same way as factors, we can use the
<code><a href="../reference/partition.html">partition()</a></code> function with the <code>.method</code> argument
set to <code>"dummy"</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">vs</span><span class="op">:</span><span class="va">gear</span>, .method <span class="op">=</span> <span class="st">"dummy"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 32 × 15</span></span></span>
<span><span class="co">#&gt;      mpg cyl    disp    hp  drat    wt  qsec  carb `vs=0` `vs=1` `am=0` `am=1`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  21   six    160    110  3.9   2.62  16.5     4 TRUE   FALSE  FALSE  TRUE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  21   six    160    110  3.9   2.88  17.0     4 TRUE   FALSE  FALSE  TRUE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  22.8 four   108     93  3.85  2.32  18.6     1 FALSE  TRUE   FALSE  TRUE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  21.4 six    258    110  3.08  3.22  19.4     1 FALSE  TRUE   TRUE   FALSE </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  18.7 eight  360    175  3.15  3.44  17.0     2 TRUE   FALSE  TRUE   FALSE </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  18.1 six    225    105  2.76  3.46  20.2     1 FALSE  TRUE   TRUE   FALSE </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  14.3 eight  360    245  3.21  3.57  15.8     4 TRUE   FALSE  TRUE   FALSE </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  24.4 four   147.    62  3.69  3.19  20       2 FALSE  TRUE   TRUE   FALSE </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  22.8 four   141.    95  3.92  3.15  22.9     2 FALSE  TRUE   TRUE   FALSE </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  19.2 six    168.   123  3.92  3.44  18.3     4 FALSE  TRUE   TRUE   FALSE </span></span>
<span><span class="co">#&gt;    `gear=3` `gear=4` `gear=5`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FALSE    TRUE     FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FALSE    TRUE     FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FALSE    TRUE     FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> TRUE     FALSE    FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> TRUE     FALSE    FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> TRUE     FALSE    FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> TRUE     FALSE    FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FALSE    TRUE     FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FALSE    TRUE     FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FALSE    TRUE     FALSE   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 22 more rows</span></span></span></code></pre></div>
<p>The <code>mpg</code> column is numeric and therefore cannot be
transformed directly into dummy logical columns. A better approach is to
use the <code>"crisp"</code> method of partitioning.</p>
<p>The <code>"crisp"</code> method divides the range of values of the
selected columns into intervals specified by the <code>.breaks</code>
argument and then encodes the values into dummy logical columns
corresponding to the intervals. The <code>.breaks</code> argument is a
numeric vector that specifies the interval boundaries.</p>
<p>For example, the <code>mpg</code> values can be divided into four
intervals: (-Inf, 15], (15, 20], (20, 30], and (30, Inf). The
<code>.breaks</code> argument is then the vector
<code>c(-Inf, 15, 20, 30, Inf)</code>, which defines the boundaries of
these intervals.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">mpg</span>, .method <span class="op">=</span> <span class="st">"crisp"</span>, .breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 32 × 14</span></span></span>
<span><span class="co">#&gt;    cyl    disp    hp  drat    wt  qsec    vs    am  gear  carb `mpg=(-Inf;15]`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> six    160    110  3.9   2.62  16.5     0     1     4     4 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> six    160    110  3.9   2.88  17.0     0     1     4     4 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> four   108     93  3.85  2.32  18.6     1     1     4     1 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> six    258    110  3.08  3.22  19.4     1     0     3     1 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> eight  360    175  3.15  3.44  17.0     0     0     3     2 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> six    225    105  2.76  3.46  20.2     1     0     3     1 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> eight  360    245  3.21  3.57  15.8     0     0     3     4 TRUE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> four   147.    62  3.69  3.19  20       1     0     4     2 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> four   141.    95  3.92  3.15  22.9     1     0     4     2 FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> six    168.   123  3.92  3.44  18.3     1     0     4     4 FALSE          </span></span>
<span><span class="co">#&gt;    `mpg=(15;20]` `mpg=(20;30]` `mpg=(30;Inf]`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> TRUE          FALSE         FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> TRUE          FALSE         FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FALSE         FALSE         FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> TRUE          FALSE         FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 22 more rows</span></span></span></code></pre></div>
<p>If we want the breaks to be evenly spaced across the range of values,
we can set <code>.breaks</code> to a single integer. This value
specifies the number of intervals to create. For example, the following
command divides the <code>disp</code> values into three intervals of
equal width:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">disp</span>, .method <span class="op">=</span> <span class="st">"crisp"</span>, .breaks <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 32 × 13</span></span></span>
<span><span class="co">#&gt;      mpg cyl      hp  drat    wt  qsec    vs    am  gear  carb `disp=(-Inf;205]`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  21   six     110  3.9   2.62  16.5     0     1     4     4 TRUE             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  21   six     110  3.9   2.88  17.0     0     1     4     4 TRUE             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  22.8 four     93  3.85  2.32  18.6     1     1     4     1 TRUE             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  21.4 six     110  3.08  3.22  19.4     1     0     3     1 FALSE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  18.7 eight   175  3.15  3.44  17.0     0     0     3     2 FALSE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  18.1 six     105  2.76  3.46  20.2     1     0     3     1 FALSE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  14.3 eight   245  3.21  3.57  15.8     0     0     3     4 FALSE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  24.4 four     62  3.69  3.19  20       1     0     4     2 TRUE             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  22.8 four     95  3.92  3.15  22.9     1     0     4     2 TRUE             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  19.2 six     123  3.92  3.44  18.3     1     0     4     4 TRUE             </span></span>
<span><span class="co">#&gt;    `disp=(205;338]` `disp=(338;Inf]`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FALSE            FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FALSE            FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FALSE            FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> TRUE             FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FALSE            TRUE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> TRUE             FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FALSE            TRUE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FALSE            FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FALSE            FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FALSE            FALSE           </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 22 more rows</span></span></span></code></pre></div>
<p>Each call to <code><a href="../reference/partition.html">partition()</a></code> returns a tibble with the
selected columns transformed to dummy logical columns, while the other
columns remain unchanged.</p>
<p>The transformation of the whole <code>mtcars</code> dataset to crisp
predicates can be done as follows:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crispMtcars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">cyl</span>, <span class="va">vs</span><span class="op">:</span><span class="va">gear</span>, .method <span class="op">=</span> <span class="st">"dummy"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">mpg</span>, .method <span class="op">=</span> <span class="st">"crisp"</span>, .breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">disp</span><span class="op">:</span><span class="va">carb</span>, .method <span class="op">=</span> <span class="st">"crisp"</span>, .breaks <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">crispMtcars</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 32</span></span></span>
<span><span class="co">#&gt;   `cyl=four` `cyl=six` `cyl=eight` `vs=0` `vs=1` `am=0` `am=1` `gear=3` `gear=4`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> TRUE       FALSE     FALSE       FALSE  TRUE   FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt;   `gear=5` `mpg=(-Inf;15]` `mpg=(15;20]` `mpg=(20;30]` `mpg=(30;Inf]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE    FALSE           FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE    FALSE           FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE    FALSE           FALSE         TRUE          FALSE         </span></span>
<span><span class="co">#&gt;   `disp=(-Inf;205]` `disp=(205;338]` `disp=(338;Inf]` `hp=(-Inf;146]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TRUE              FALSE            FALSE            TRUE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRUE              FALSE            FALSE            TRUE           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> TRUE              FALSE            FALSE            TRUE           </span></span>
<span><span class="co">#&gt;   `hp=(146;241]` `hp=(241;Inf]` `drat=(-Inf;3.48]` `drat=(3.48;4.21]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE          FALSE          FALSE              TRUE              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE          FALSE          FALSE              TRUE              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE          FALSE          FALSE              TRUE              </span></span>
<span><span class="co">#&gt;   `drat=(4.21;Inf]` `wt=(-Inf;2.82]` `wt=(2.82;4.12]` `wt=(4.12;Inf]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE             TRUE             FALSE            FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE             FALSE            TRUE             FALSE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE             TRUE             FALSE            FALSE          </span></span>
<span><span class="co">#&gt;   `qsec=(-Inf;17.3]` `qsec=(17.3;20.1]` `qsec=(20.1;Inf]` `carb=(-Inf;3.33]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TRUE               FALSE              FALSE             FALSE             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRUE               FALSE              FALSE             FALSE             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE              TRUE               FALSE             TRUE              </span></span>
<span><span class="co">#&gt;   `carb=(3.33;5.67]` `carb=(5.67;Inf]`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TRUE               FALSE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRUE               FALSE            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE              FALSE</span></span></code></pre></div>
<p>Now all columns are logical and can be used as predicates in crisp
conditions.</p>
</div>
<div class="section level3">
<h3 id="preparations-of-fuzzy-predicates">Preparations of Fuzzy Predicates<a class="anchor" aria-label="anchor" href="#preparations-of-fuzzy-predicates"></a>
</h3>
<p>In many real-world datasets, numeric attributes do not lend
themselves to clear-cut, crisp boundaries. For example, deciding whether
a car has “low mileage” or “high mileage” is often subjective. A vehicle
with 19 miles per gallon may be considered “low” in one context but
“medium” in another. Crisp intervals force a strict separation between
categories, which can be too rigid and may lose information about
gradual changes in the data.</p>
<p>To address this, <strong>fuzzy predicates</strong> are used. A fuzzy
predicate expresses the degree to which a condition is satisfied.
Instead of being strictly <code>TRUE</code> or <code>FALSE</code>, each
predicate is represented by a number in the interval <span class="math inline">\([0,1]\)</span>. A truth degree of 0 means the
predicate is entirely false, 1 means it is fully true, and values in
between indicate partial membership. This allows us to model smooth
transitions between categories and capture more nuanced patterns.</p>
<p>For example, a fuzzy predicate could represent “medium horsepower” in
the <code>mtcars</code> dataset. A car with 120 hp may belong to this
category to a degree of 0.8, while a car with 150 hp may belong to it
only to a degree of 0.2. Such representations are more faithful to human
reasoning and often yield patterns that are both more robust and more
interpretable.</p>
<p>The transformation of numeric columns to fuzzy predicates can be done
with the <code><a href="../reference/partition.html">partition()</a></code> function. As with crisp partitioning,
factors are transformed to dummy logical columns. Numeric columns,
however, are transformed into <em>fuzzy truth values</em>. The
<code><a href="../reference/partition.html">partition()</a></code> function provides two fuzzy partitioning
methods:</p>
<ul>
<li>
<code>.method = "triangle"</code> creates fuzzy sets with triangular
membership functions.<br>
</li>
<li>
<code>.method = "raisedcos"</code> creates fuzzy sets with raised
cosine membership functions.</li>
</ul>
<p>These membership functions specify how strongly a value belongs to a
fuzzy set. The choice of function depends on the desired smoothness of
the transition between sets.</p>
<div class="figure" style="text-align: center">
<img src="nuggets_files/figure-html/unnamed-chunk-9-1.png" alt="Comparison of triangular and raised cosine membership functions
" width="80%"><p class="caption">
Comparison of triangular and raised cosine membership functions
</p>
</div>
<p>More advanced fuzzy partitioning of numeric columns can be achieved
with the <a href="https://cran.r-project.org/package=lfl" class="external-link">lfl</a>
package, which provides tools for defining fuzzy sets of many types,
including linguistic terms such as “very small” or “extremely big”. See
the <a href="https://github.com/beerda/lfl/blob/master/vignettes/main.pdf" class="external-link"><code>lfl</code>
documentation</a> for more information.</p>
<p>In the following example, the <code>mpg</code> and <code>hp</code>
columns from the <code>mtcars</code> dataset are transformed to fuzzy
sets with triangular membership functions. The <code>.breaks</code>
argument specifies the fuzzy set definitions. For
<code>.method = "triangle"</code>, each consecutive triplet of values in
<code>.breaks</code> defines one triangular fuzzy set: the first and
last values are the borders of the triangle, and the middle value is its
peak.</p>
<p>For instance, <code>.breaks = c(-Inf, 15, 20, 30, Inf)</code> creates
three triangular fuzzy sets defined with triplets (-Inf,15,20),
(15,20,30), and (20,30,Inf):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">mpg</span>, .method <span class="op">=</span> <span class="st">"triangle"</span>, .breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 32 × 13</span></span></span>
<span><span class="co">#&gt;    cyl    disp    hp  drat    wt  qsec    vs    am  gear  carb</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> six    160    110  3.9   2.62  16.5     0     1     4     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> six    160    110  3.9   2.88  17.0     0     1     4     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> four   108     93  3.85  2.32  18.6     1     1     4     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> six    258    110  3.08  3.22  19.4     1     0     3     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> eight  360    175  3.15  3.44  17.0     0     0     3     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> six    225    105  2.76  3.46  20.2     1     0     3     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> eight  360    245  3.21  3.57  15.8     0     0     3     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> four   147.    62  3.69  3.19  20       1     0     4     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> four   141.    95  3.92  3.15  22.9     1     0     4     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> six    168.   123  3.92  3.44  18.3     1     0     4     4</span></span>
<span><span class="co">#&gt;    `mpg=(-Inf;15;20)` `mpg=(15;20;30)` `mpg=(20;30;Inf)`</span></span>
<span><span class="co">#&gt;                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>              0                0.9               0.1  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>              0                0.9               0.1  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>              0                0.72              0.28 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>              0                0.86              0.140</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>              0.26             0.74              0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>              0.380            0.620             0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>              1                0                 0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>              0                0.56              0.44 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>              0                0.72              0.28 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>              0.160            0.84              0    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 22 more rows</span></span></span></code></pre></div>
<p>If a regular partitioning of the range of values is desired,
<code>.breaks</code> can be set to a single integer, which specifies the
number of fuzzy sets to create. For example, the following command
divides the <code>disp</code> values into three overlapping triangular
fuzzy sets:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">disp</span>, .method <span class="op">=</span> <span class="st">"triangle"</span>, .breaks <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 32 × 13</span></span></span>
<span><span class="co">#&gt;      mpg cyl      hp  drat    wt  qsec    vs    am  gear  carb</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  21   six     110  3.9   2.62  16.5     0     1     4     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  21   six     110  3.9   2.88  17.0     0     1     4     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  22.8 four     93  3.85  2.32  18.6     1     1     4     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  21.4 six     110  3.08  3.22  19.4     1     0     3     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  18.7 eight   175  3.15  3.44  17.0     0     0     3     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  18.1 six     105  2.76  3.46  20.2     1     0     3     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  14.3 eight   245  3.21  3.57  15.8     0     0     3     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  24.4 four     62  3.69  3.19  20       1     0     4     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  22.8 four     95  3.92  3.15  22.9     1     0     4     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  19.2 six     123  3.92  3.44  18.3     1     0     4     4</span></span>
<span><span class="co">#&gt;    `disp=(-Inf;71.1;272)` `disp=(71.1;272;472)` `disp=(272;472;Inf)`</span></span>
<span><span class="co">#&gt;                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>                 0.557                  0.443                 0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>                 0.557                  0.443                 0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>                 0.816                  0.184                 0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>                 0.069<span style="text-decoration: underline;">7</span>                 0.930                 0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>                 0                      0.56                  0.44</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>                 0.234                  0.766                 0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>                 0                      0.56                  0.44</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>                 0.624                  0.376                 0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>                 0.653                  0.347                 0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>                 0.520                  0.480                 0   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 22 more rows</span></span></span></code></pre></div>
<p>The fuzzy transformation of the whole <code>mtcars</code> dataset is
shown below:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fuzzyMtcars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">cyl</span>, <span class="va">vs</span><span class="op">:</span><span class="va">gear</span>, .method <span class="op">=</span> <span class="st">"dummy"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">mpg</span>, .method <span class="op">=</span> <span class="st">"triangle"</span>, .breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/partition.html">partition</a></span><span class="op">(</span><span class="va">disp</span><span class="op">:</span><span class="va">carb</span>, .method <span class="op">=</span> <span class="st">"triangle"</span>, .breaks <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">fuzzyMtcars</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 31</span></span></span>
<span><span class="co">#&gt;   `cyl=four` `cyl=six` `cyl=eight` `vs=0` `vs=1` `am=0` `am=1` `gear=3` `gear=4`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> TRUE       FALSE     FALSE       FALSE  TRUE   FALSE  TRUE   FALSE    TRUE    </span></span>
<span><span class="co">#&gt;   `gear=5` `mpg=(-Inf;15;20)` `mpg=(15;20;30)` `mpg=(20;30;Inf)`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE                     0             0.9               0.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FALSE                     0             0.9               0.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FALSE                     0             0.72              0.28</span></span>
<span><span class="co">#&gt;   `disp=(-Inf;71.1;272)` `disp=(71.1;272;472)` `disp=(272;472;Inf)`</span></span>
<span><span class="co">#&gt;                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  0.557                 0.443                    0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  0.557                 0.443                    0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                  0.816                 0.184                    0</span></span>
<span><span class="co">#&gt;   `hp=(-Inf;52;194)` `hp=(52;194;335)` `hp=(194;335;Inf)`</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>              0.592             0.408                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>              0.592             0.408                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>              0.711             0.289                  0</span></span>
<span><span class="co">#&gt;   `drat=(-Inf;2.76;3.84)` `drat=(2.76;3.84;4.93)` `drat=(3.84;4.93;Inf)`</span></span>
<span><span class="co">#&gt;                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                       0                   0.945                0.055<span style="text-decoration: underline;">0</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                       0                   0.945                0.055<span style="text-decoration: underline;">0</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                       0                   0.991                0.009<span style="text-decoration: underline;">17</span></span></span>
<span><span class="co">#&gt;   `wt=(-Inf;1.51;3.47)` `wt=(1.51;3.47;5.42)` `wt=(3.47;5.42;Inf)`</span></span>
<span><span class="co">#&gt;                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                 0.434                 0.566                    0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                 0.304                 0.696                    0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                 0.587                 0.413                    0</span></span>
<span><span class="co">#&gt;   `qsec=(-Inf;14.5;18.7)` `qsec=(14.5;18.7;22.9)` `qsec=(18.7;22.9;Inf)`</span></span>
<span><span class="co">#&gt;                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  0.533                    0.467                      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  0.4                      0.6                        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                  0.021<span style="text-decoration: underline;">4</span>                   0.979                      0</span></span>
<span><span class="co">#&gt;   `carb=(-Inf;1;4.5)` `carb=(1;4.5;8)` `carb=(4.5;8;Inf)`</span></span>
<span><span class="co">#&gt;                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>               0.143            0.857                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>               0.143            0.857                  0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>               1                0                      0</span></span></code></pre></div>
<p>Note that the <code>cyl</code>, <code>vs</code>, <code>am</code>, and
<code>gear</code> columns are still represented by dummy logical
columns, while the <code>mpg</code>, <code>disp</code>, and other
columns are now represented by fuzzy sets. This combination allows both
crisp and fuzzy predicates to be used together in pattern discovery,
offering more flexibility and interpretability.</p>
</div>
</div>
<div class="section level2">
<h2 id="pre-defined-patterns">Pre-defined Patterns<a class="anchor" aria-label="anchor" href="#pre-defined-patterns"></a>
</h2>
<p><code>nuggets</code> provides a set of functions for searching for
some best-known pattern types. These functions allow to process Boolean
data, fuzzy data, or both. The result of these functions is always a
tibble with patterns stored as rows. For more advance usage, which
allows to search for custom patterns or to compute user-defined measures
and statistics, see the section <strong>Custom Patterns</strong>.</p>
<div class="section level4">
<h4 id="search-for-association-rules">Search for Association Rules<a class="anchor" aria-label="anchor" href="#search-for-association-rules"></a>
</h4>
<p>Association rules are rules of the form <span class="math inline">\(A
\Rightarrow B\)</span>, where <span class="math inline">\(A\)</span> is
either Boolean or fuzzy condition in the form of conjunction, and <span class="math inline">\(B\)</span> is a Boolean or fuzzy predicate.</p>
<p>Before continuing with the search for rules, it is advisable to
create the so-called <em>vector of disjoints</em>. The vector of
disjoints is a character vector with the same length as the number of
columns in the analyzed dataset. It specifies predicates, which are
mutually exclusive and should not be combined together in a single
pattern’s condition: columns with equal values in the disjoint vector
will not appear in a single condition. Providing the vector of disjoints
to the algorithm will speed-up the search as it makes no sense, e.g., to
combine <code>Plant=Qn1</code> and <code>Plant=Qn2</code> in a condition
<code>Plant=Qn1 &amp; Plant=Qn2</code> as such formula is never true for
any data row.</p>
<p>The vector of disjoints can be easily created from the column names
of the dataset, e.g., by obtaining the first part of column names before
the equal sign, which is neatly provided by the <code><a href="../reference/var_names.html">var_names()</a></code>
function as follows:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#disj &lt;- var_names(colnames(fuzzyCO2))</span></span>
<span><span class="co">#print(disj)</span></span></code></pre></div>
<p>The function <code>dig_associations</code> takes the analyzed dataset
as its first parameter and a pair of <code>tidyselect</code> expressions
to select the column names to appear in the left-hand (antecedent) and
right-hand (consequent) side of the rule. The following command searches
for associations rules, such that:</p>
<ul>
<li>any column except those starting with “Treatment” is in the
antecedent;</li>
<li>any column starting with “Treatment” is in the consequent;</li>
<li>the minimum support is 0.02 (support is the proportion of rows that
satisfy the antecedent AND consequent));</li>
<li>the minimum confidence is 0.8 (confidence is the proportion of rows
satisfying the consequent GIVEN the antecedent is true).</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#result &lt;- dig_associations(fuzzyCO2,</span></span>
<span>                           <span class="co">#antecedent = !starts_with("Treatment"),</span></span>
<span>                           <span class="co">#consequent = starts_with("Treatment"),</span></span>
<span>                           <span class="co">#disjoint = disj,</span></span>
<span>                           <span class="co">#min_support = 0.02,</span></span>
<span>                           <span class="co">#min_confidence = 0.8)</span></span></code></pre></div>
<p>The result is a tibble with found rules. We may arrange it by support
in descending order:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#result &lt;- arrange(result, desc(support))</span></span>
<span><span class="co">#print(result)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="conditional-correlations">Conditional Correlations<a class="anchor" aria-label="anchor" href="#conditional-correlations"></a>
</h3>
<p>TBD (<code>dig_correlations</code>)</p>
</div>
<div class="section level3">
<h3 id="contrast-patterns">Contrast Patterns<a class="anchor" aria-label="anchor" href="#contrast-patterns"></a>
</h3>
<p>TBD (<code>dig_contrasts</code>)</p>
</div>
</div>
<div class="section level2">
<h2 id="post-processing-and-visualization">Post-processing and Visualization<a class="anchor" aria-label="anchor" href="#post-processing-and-visualization"></a>
</h2>
<p>TBD</p>
</div>
<div class="section level2">
<h2 id="custom-patterns">Custom Patterns<a class="anchor" aria-label="anchor" href="#custom-patterns"></a>
</h2>
<p>The <code>nuggets</code> package allows to execute a user-defined
callback function on each generated frequent condition. That way a
custom type of patterns may be searched. The following example
replicates the search for associations rules with the custom callback
function. For that, a dataset has to be dichotomized and the disjoint
vector created as in the <strong>Data Preparation</strong> section
above:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#head(fuzzyCO2)</span></span>
<span><span class="co">#print(disj)</span></span></code></pre></div>
<p>As we want to search for associations rules with some minimum support
and confidence, we define the variables to hold that thresholds. We also
need to define a callback function that will be called for each found
frequent condition. Its purpose is to generate the rules with the
obtained condition as an antecedent:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">min_support</span> <span class="op">&lt;-</span> <span class="fl">0.02</span></span>
<span><span class="va">min_confidence</span> <span class="op">&lt;-</span> <span class="fl">0.8</span></span>
<span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">support</span>, <span class="va">foci_supports</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">conf</span> <span class="op">&lt;-</span> <span class="va">foci_supports</span> <span class="op">/</span> <span class="va">support</span></span>
<span>    <span class="va">sel</span> <span class="op">&lt;-</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">conf</span> <span class="op">&gt;=</span> <span class="va">min_confidence</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">foci_supports</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">foci_supports</span> <span class="op">&gt;=</span> <span class="va">min_support</span></span>
<span>    <span class="va">conf</span> <span class="op">&lt;-</span> <span class="va">conf</span><span class="op">[</span><span class="va">sel</span><span class="op">]</span></span>
<span>    <span class="va">supp</span> <span class="op">&lt;-</span> <span class="va">foci_supports</span><span class="op">[</span><span class="va">sel</span><span class="op">]</span></span>
<span>    </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>antecedent <span class="op">=</span> <span class="fu"><a href="../reference/format_condition.html">format_condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">condition</span><span class="op">)</span><span class="op">)</span>,</span>
<span>           consequent <span class="op">=</span> <span class="fu"><a href="../reference/format_condition.html">format_condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">conf</span><span class="op">)</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>           support <span class="op">=</span> <span class="va">supp</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>,</span>
<span>           confidence <span class="op">=</span> <span class="va">conf</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The callback function <code>f()</code> defines three arguments:
<code>condition</code>, <code>support</code> and
<code>foci_supports</code>. The names of the arguments are not random.
Based on the argument names of the callback function, the searching
algorithm provides information to the function. Here
<code>condition</code> is a vector of indices representing the
conjunction of predicates in a condition. By the predicate we mean the
column in the source dataset. The <code>support</code> argument gets the
relative frequency of the condition in the dataset.
<code>foci_supports</code> is a vector of supports of special
predicates, which we call “foci” (plural of “focus”), within the rows
satisfying the condition. For associations rules, foci are potential
rule consequents.</p>
<p>Now we can run the digging for rules:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#result &lt;- dig(fuzzyCO2,</span></span>
<span>              <span class="co">#f = f,</span></span>
<span>              <span class="co">#condition = !starts_with("Treatment"),</span></span>
<span>              <span class="co">#focus = starts_with("Treatment"),</span></span>
<span>              <span class="co">#disjoint = disj,</span></span>
<span>              <span class="co">#min_length = 1,</span></span>
<span>              <span class="co">#min_support = min_support)</span></span></code></pre></div>
<p>As we return a list of lists in the callback function, we have to
flatten the first level of lists in the result and binding it into a
data frame:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#result &lt;- result |&gt;</span></span>
<span>  <span class="co">#unlist(recursive = FALSE) |&gt;</span></span>
<span>  <span class="co">#lapply(as_tibble) |&gt;</span></span>
<span>  <span class="co">#do.call(rbind, args = _) |&gt;</span></span>
<span>  <span class="co">#arrange(desc(support))</span></span>
<span><span class="co">#</span></span>
<span><span class="co">#print(result)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michal Burda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>

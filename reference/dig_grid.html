<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Search for grid-based rules — dig_grid • nuggets</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Search for grid-based rules — dig_grid"><meta name="description" content="
This function creates a grid of combinations of pairs of columns specified
by xvars and yvars (see also var_grid()). After that, it enumerates all
conditions created from data in x (by calling dig()) and for each such
condition and for each row of the grid of combinations, a user-defined
function f is executed on each sub-data created from x by selecting all
rows of x that satisfy the generated condition and by selecting the
columns in the grid's row.
Function is useful for searching for patterns that are based on the
relationships between pairs of columns, such as in dig_correlations()."><meta property="og:description" content="
This function creates a grid of combinations of pairs of columns specified
by xvars and yvars (see also var_grid()). After that, it enumerates all
conditions created from data in x (by calling dig()) and for each such
condition and for each row of the grid of combinations, a user-defined
function f is executed on each sub-data created from x by selecting all
rows of x that satisfy the generated condition and by selecting the
columns in the grid's row.
Function is useful for searching for patterns that are based on the
relationships between pairs of columns, such as in dig_correlations()."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nuggets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/nuggets.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/beerda/nuggets/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Search for grid-based rules</h1>
      <small class="dont-index">Source: <a href="https://github.com/beerda/nuggets/blob/main/R/dig_grid.R" class="external-link"><code>R/dig_grid.R</code></a></small>
      <div class="d-none name"><code>dig_grid.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>This function creates a grid of combinations of pairs of columns specified
by <code>xvars</code> and <code>yvars</code> (see also <code><a href="var_grid.html">var_grid()</a></code>). After that, it enumerates all
conditions created from data in <code>x</code> (by calling <code><a href="dig.html">dig()</a></code>) and for each such
condition and for each row of the grid of combinations, a user-defined
function <code>f</code> is executed on each sub-data created from <code>x</code> by selecting all
rows of <code>x</code> that satisfy the generated condition and by selecting the
columns in the grid's row.</p>
<p>Function is useful for searching for patterns that are based on the
relationships between pairs of columns, such as in <code><a href="dig_correlations.html">dig_correlations()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dig_grid</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">f</span>,</span>
<span>  condition <span class="op">=</span> <span class="fu">where</span><span class="op">(</span><span class="va">is.logical</span><span class="op">)</span>,</span>
<span>  xvars <span class="op">=</span> <span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>,</span>
<span>  yvars <span class="op">=</span> <span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>,</span>
<span>  disjoint <span class="op">=</span> <span class="fu"><a href="var_names.html">var_names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  allow <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  na_rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"crisp"</span>,</span>
<span>  min_length <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  max_length <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  min_support <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  threads <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  error_context <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>arg_x <span class="op">=</span> <span class="st">"x"</span>, arg_f <span class="op">=</span> <span class="st">"f"</span>, arg_condition <span class="op">=</span> <span class="st">"condition"</span>, arg_xvars <span class="op">=</span></span>
<span>    <span class="st">"xvars"</span>, arg_yvars <span class="op">=</span> <span class="st">"yvars"</span>, arg_disjoint <span class="op">=</span> <span class="st">"disjoint"</span>, arg_allow <span class="op">=</span> <span class="st">"allow"</span>,</span>
<span>    arg_na_rm <span class="op">=</span> <span class="st">"na_rm"</span>, arg_type <span class="op">=</span> <span class="st">"type"</span>, arg_min_length <span class="op">=</span> <span class="st">"min_length"</span>, arg_max_length</span>
<span>    <span class="op">=</span> <span class="st">"max_length"</span>, arg_min_support <span class="op">=</span> <span class="st">"min_support"</span>, arg_threads <span class="op">=</span> <span class="st">"threads"</span>, call <span class="op">=</span></span>
<span>    <span class="fu">current_env</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a matrix or data frame with data to search in.</p></dd>


<dt id="arg-f">f<a class="anchor" aria-label="anchor" href="#arg-f"></a></dt>
<dd><p>the callback function to be executed for each generated condition.
The arguments of the callback function differ based on the value of the
<code>type</code> argument (see below):</p><ul><li><p>If <code>type = "crisp"</code> (that is, boolean),
the callback function <code>f</code> must accept a single argument <code>pd</code> of type
<code>data.frame</code> with two columns, xvar (accessible as <code>pd[[1]]</code>) and yvar
(accessible as <code>pd[[2]]</code>). Data frame <code>pd</code> is a subset of the original
data frame <code>x</code> with all rows that satisfy the generated condition.
Optionally, the callback function may accept an argument <code>nd</code> that
is a subset of the original data frame <code>x</code> with all rows that do not
satisfy the generated condition.</p></li>
<li><p>If <code>type = "fuzzy"</code>, the callback function <code>f</code> must accept an argument
<code>d</code> of type <code>data.frame</code> with two columns, xvar (<code>d[[1]]</code>) and yvar
(<code>d[[2]]</code>), named as in<code>x</code>, and a numeric argument <code>weights</code>
with the same length as the number of rows in <code>d</code>. The <code>weights</code>
argument contains the truth degree
of the generated condition for each row of <code>d</code>. The truth degree is
a number in the interval \([0, 1]\) that represents the degree of
satisfaction of the condition in the original data row.</p></li>
</ul><p>In all cases, the function must return a list of scalar values, which
will be converted into a single row of result of final tibble.</p></dd>


<dt id="arg-condition">condition<a class="anchor" aria-label="anchor" href="#arg-condition"></a></dt>
<dd><p>a tidyselect expression (see
<a href="https://tidyselect.r-lib.org/articles/syntax.html" class="external-link">tidyselect syntax</a>)
specifying the columns to use as condition predicates. The selected
columns must be logical or numeric. If numeric, fuzzy conditions are
considered.</p></dd>


<dt id="arg-xvars">xvars<a class="anchor" aria-label="anchor" href="#arg-xvars"></a></dt>
<dd><p>a tidyselect expression (see
<a href="https://tidyselect.r-lib.org/articles/syntax.html" class="external-link">tidyselect syntax</a>)
specifying the columns of <code>x</code>, whose names will be used as a domain for
combinations use at the first place (xvar)</p></dd>


<dt id="arg-yvars">yvars<a class="anchor" aria-label="anchor" href="#arg-yvars"></a></dt>
<dd><p>a tidyselect expression (see
<a href="https://tidyselect.r-lib.org/articles/syntax.html" class="external-link">tidyselect syntax</a>)
specifying the columns of <code>x</code>, whose names will be used as a domain for
combinations use at the second place (yvar)</p></dd>


<dt id="arg-disjoint">disjoint<a class="anchor" aria-label="anchor" href="#arg-disjoint"></a></dt>
<dd><p>an atomic vector of size equal to the number of columns of <code>x</code>
that specifies the groups of predicates: if some elements of the <code>disjoint</code>
vector are equal, then the corresponding columns of <code>x</code> will NOT be
present together in a single condition. If <code>x</code> is prepared with
<code><a href="partition.html">partition()</a></code>, using the <code><a href="var_names.html">var_names()</a></code> function on <code>x</code>'s column names
is a convenient way to create the <code>disjoint</code> vector.</p></dd>


<dt id="arg-allow">allow<a class="anchor" aria-label="anchor" href="#arg-allow"></a></dt>
<dd><p>a character string specifying which columns are allowed to be
selected by <code>xvars</code> and <code>yvars</code> arguments. Possible values are:</p><ul><li><p><code>"all"</code> - all columns are allowed to be selected</p></li>
<li><p><code>"numeric"</code> - only numeric columns are allowed to be selected</p></li>
</ul></dd>


<dt id="arg-na-rm">na_rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>a logical value indicating whether to remove rows with missing
values from sub-data before the callback function <code>f</code> is called</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>a character string specifying the type of conditions to be processed.
The <code>"crisp"</code> type accepts only logical columns as condition predicates.
The <code>"fuzzy"</code> type accepts both logical and numeric columns as condition
predicates where numeric data are in the interval \([0, 1]\). The
callback function <code>f</code> differs based on the value of the <code>type</code> argument
(see the description of <code>f</code> above).</p></dd>


<dt id="arg-min-length">min_length<a class="anchor" aria-label="anchor" href="#arg-min-length"></a></dt>
<dd><p>the minimum size (the minimum number of predicates) of the
condition to be generated (must be greater or equal to 0). If 0, the empty
condition is generated in the first place.</p></dd>


<dt id="arg-max-length">max_length<a class="anchor" aria-label="anchor" href="#arg-max-length"></a></dt>
<dd><p>the maximum size (the maximum number of predicates) of the
condition to be generated. If equal to Inf, the maximum length of conditions
is limited only by the number of available predicates.</p></dd>


<dt id="arg-min-support">min_support<a class="anchor" aria-label="anchor" href="#arg-min-support"></a></dt>
<dd><p>the minimum support of a condition to trigger the callback
function for it. The support of the condition is the relative frequency
of the condition in the dataset <code>x</code>. For logical data, it equals to the
relative frequency of rows such that all condition predicates are TRUE on it.
For numerical (double) input, the support is computed as the mean (over all
rows) of multiplications of predicate values.</p></dd>


<dt id="arg-threads">threads<a class="anchor" aria-label="anchor" href="#arg-threads"></a></dt>
<dd><p>the number of threads to use for parallel computation.</p></dd>


<dt id="arg-error-context">error_context<a class="anchor" aria-label="anchor" href="#arg-error-context"></a></dt>
<dd><p>a list of details to be used in error messages.
This argument is useful when <code>dig_grid()</code> is called from another
function to provide error messages, which refer to arguments of the
calling function. The list must contain the following elements:</p><ul><li><p><code>arg_x</code> - the name of the argument <code>x</code> as a character string</p></li>
<li><p><code>arg_condition</code> - the name of the argument <code>condition</code> as a character
string</p></li>
<li><p><code>arg_xvars</code> - the name of the argument <code>xvars</code> as a character string</p></li>
<li><p><code>arg_yvars</code> - the name of the argument <code>yvars</code> as a character string</p></li>
<li><p><code>call</code> - an environment in which to evaluate the error messages.</p></li>
</ul></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments, currently unused.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble with found patterns. Each row represents a single call of
the callback function <code>f</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="dig.html">dig()</a></code>, <code><a href="var_grid.html">var_grid()</a></code>; see also <code><a href="dig_correlations.html">dig_correlations()</a></code> and
<code><a href="dig_paired_baseline_contrasts.html">dig_paired_baseline_contrasts()</a></code>, as they are using this function internally.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Michal Burda</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># *** Example of crisp (boolean) patterns:</span></span></span>
<span class="r-in"><span><span class="co"># dichotomize iris$Species</span></span></span>
<span class="r-in"><span><span class="va">crispIris</span> <span class="op">&lt;-</span> <span class="fu"><a href="partition.html">partition</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Species</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># a simple callback function that computes mean difference of `xvar` and `yvar`</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">pd</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>m <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">pd</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="va">pd</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">pd</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># call f() for each condition created from column `Species`</span></span></span>
<span class="r-in"><span><span class="fu">dig_grid</span><span class="op">(</span><span class="va">crispIris</span>,</span></span>
<span class="r-in"><span>         <span class="va">f</span>,</span></span>
<span class="r-in"><span>         condition <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         xvars <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"Sepal"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         yvars <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"Petal"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         type <span class="op">=</span> <span class="st">"crisp"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 16 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    condition            support xvar         yvar              m     n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> {}                     1     Sepal.Length Petal.Length  2.09    150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> {}                     1     Sepal.Length Petal.Width   4.64    150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> {}                     1     Sepal.Width  Petal.Length -<span style="color: #BB0000;">0.701</span>   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> {}                     1     Sepal.Width  Petal.Width   1.86    150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> {Species=setosa}       0.333 Sepal.Length Petal.Length  3.54     50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> {Species=setosa}       0.333 Sepal.Length Petal.Width   4.76     50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> {Species=setosa}       0.333 Sepal.Width  Petal.Length  1.97     50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> {Species=setosa}       0.333 Sepal.Width  Petal.Width   3.18     50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> {Species=versicolor}   0.333 Sepal.Length Petal.Length  1.68     50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> {Species=versicolor}   0.333 Sepal.Length Petal.Width   4.61     50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> {Species=versicolor}   0.333 Sepal.Width  Petal.Length -<span style="color: #BB0000;">1.49</span>     50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> {Species=versicolor}   0.333 Sepal.Width  Petal.Width   1.44     50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> {Species=virginica}    0.333 Sepal.Length Petal.Length  1.04     50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> {Species=virginica}    0.333 Sepal.Length Petal.Width   4.56     50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> {Species=virginica}    0.333 Sepal.Width  Petal.Length -<span style="color: #BB0000;">2.58</span>     50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> {Species=virginica}    0.333 Sepal.Width  Petal.Width   0.948    50</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># *** Example of fuzzy patterns:</span></span></span>
<span class="r-in"><span><span class="co"># create fuzzy sets from Sepal columns</span></span></span>
<span class="r-in"><span><span class="va">fuzzyIris</span> <span class="op">&lt;-</span> <span class="fu"><a href="partition.html">partition</a></span><span class="op">(</span><span class="va">iris</span>,</span></span>
<span class="r-in"><span>                       <span class="fu">starts_with</span><span class="op">(</span><span class="st">"Sepal"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       .method <span class="op">=</span> <span class="st">"triangle"</span>,</span></span>
<span class="r-in"><span>                       .breaks <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># a simple callback function that computes a weighted mean of a difference of</span></span></span>
<span class="r-in"><span><span class="co"># `xvar` and `yvar`</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">d</span>, <span class="va">weights</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>m <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/weighted.mean.html" class="external-link">weighted.mean</a></span><span class="op">(</span><span class="va">d</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="va">d</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, w <span class="op">=</span> <span class="va">weights</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         w <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">weights</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># call f() for each fuzzy condition created from column fuzzy sets whose</span></span></span>
<span class="r-in"><span><span class="co"># names start with "Sepal"</span></span></span>
<span class="r-in"><span><span class="fu">dig_grid</span><span class="op">(</span><span class="va">fuzzyIris</span>,</span></span>
<span class="r-in"><span>         <span class="va">f</span>,</span></span>
<span class="r-in"><span>         condition <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"Sepal"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         xvars <span class="op">=</span> <span class="va">Petal.Length</span>,</span></span>
<span class="r-in"><span>         yvars <span class="op">=</span> <span class="va">Petal.Width</span>,</span></span>
<span class="r-in"><span>         type <span class="op">=</span> <span class="st">"fuzzy"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 16 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    condition                                    support xvar  yvar      m      w</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> {}                                           1       Peta… Peta…  2.56 150   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> {Sepal.Width=(2;3.2;4.4)}                    0.694   Peta… Peta…  2.56 104.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> {Sepal.Length=(4.3;6.1;7.9)}                 0.600   Peta… Peta…  2.74  89.9 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> {Sepal.Length=(-Inf;4.3;6.1)}                0.271   Peta… Peta…  1.59  40.7 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> {Sepal.Width=(-Inf;2;3.2)}                   0.212   Peta… Peta…  2.96  31.8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> {Sepal.Length=(6.1;7.9;Inf)}                 0.129   Peta… Peta…  3.76  19.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> {Sepal.Width=(3.2;4.4;Inf)}                  0.093<span style="text-decoration: underline;">3</span>  Peta… Peta…  1.62  14.0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> {Sepal.Length=(4.3;6.1;7.9),Sepal.Width=(3.… 0.048<span style="text-decoration: underline;">6</span>  Peta… Peta…  1.47   7.30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> {Sepal.Length=(-Inf;4.3;6.1),Sepal.Width=(3… 0.036<span style="text-decoration: underline;">4</span>  Peta… Peta…  1.22   5.45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> {Sepal.Length=(6.1;7.9;Inf),Sepal.Width=(3.… 0.008<span style="text-decoration: underline;">33</span> Peta… Peta…  4.22   1.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> {Sepal.Length=(-Inf;4.3;6.1),Sepal.Width=(2… 0.188   Peta… Peta…  1.50  28.2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> {Sepal.Length=(6.1;7.9;Inf),Sepal.Width=(2;… 0.098<span style="text-decoration: underline;">8</span>  Peta… Peta…  3.70  14.8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> {Sepal.Length=(6.1;7.9;Inf),Sepal.Width=(-I… 0.021<span style="text-decoration: underline;">8</span>  Peta… Peta…  3.87   3.26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> {Sepal.Length=(4.3;6.1;7.9),Sepal.Width=(2;… 0.408   Peta… Peta…  2.78  61.2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> {Sepal.Length=(4.3;6.1;7.9),Sepal.Width=(-I… 0.143   Peta… Peta…  3.06  21.5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> {Sepal.Length=(-Inf;4.3;6.1),Sepal.Width=(-… 0.047<span style="text-decoration: underline;">2</span>  Peta… Peta…  2.23   7.08</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michal Burda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>


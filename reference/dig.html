<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Search for patterns of custom type — dig • nuggets</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Search for patterns of custom type — dig"><meta name="description" content="
A general function for searching for patterns of custom type. The function
allows for the selection of columns of x to be used as condition
predicates. The function enumerates all possible conditions in the form of
elementary conjunctions of selected predicates, and for each condition,
a user-defined callback function f is executed. The callback function is
intended to perform some analysis and return an object representing a pattern
or patterns related to the condition. dig() returns a list of these
returned objects.
The callback function f may have some arguments that are listed in the
f argument description. The algorithm provides information about the
generated condition based on the present arguments.
Additionally to condition, the function allows for the selection of
the so-called focus predicates. The focus predicates, a.k.a. foci, are
predicates that are evaluated within each condition and some additional
information is provided to the callback function about them.
dig() allows to specify some restrictions on the generated conditions,
such as:
the minimum and maximum length of the condition (min_length and
max_length arguments).
the minimum support of the condition (min_support argument). Support
of the condition is the relative frequency of the condition in the dataset
x.
the minimum support of the focus (min_focus_support argument). Support
of the focus is the relative frequency of rows such that all condition
predicates AND the focus are TRUE on it. Foci with support lower than
min_focus_support are filtered out.

"><meta property="og:description" content="
A general function for searching for patterns of custom type. The function
allows for the selection of columns of x to be used as condition
predicates. The function enumerates all possible conditions in the form of
elementary conjunctions of selected predicates, and for each condition,
a user-defined callback function f is executed. The callback function is
intended to perform some analysis and return an object representing a pattern
or patterns related to the condition. dig() returns a list of these
returned objects.
The callback function f may have some arguments that are listed in the
f argument description. The algorithm provides information about the
generated condition based on the present arguments.
Additionally to condition, the function allows for the selection of
the so-called focus predicates. The focus predicates, a.k.a. foci, are
predicates that are evaluated within each condition and some additional
information is provided to the callback function about them.
dig() allows to specify some restrictions on the generated conditions,
such as:
the minimum and maximum length of the condition (min_length and
max_length arguments).
the minimum support of the condition (min_support argument). Support
of the condition is the relative frequency of the condition in the dataset
x.
the minimum support of the focus (min_focus_support argument). Support
of the focus is the relative frequency of rows such that all condition
predicates AND the focus are TRUE on it. Foci with support lower than
min_focus_support are filtered out.

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nuggets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/nuggets.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/beerda/nuggets/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Search for patterns of custom type</h1>
      <small class="dont-index">Source: <a href="https://github.com/beerda/nuggets/blob/main/R/dig.R" class="external-link"><code>R/dig.R</code></a></small>
      <div class="d-none name"><code>dig.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>A general function for searching for patterns of custom type. The function
allows for the selection of columns of <code>x</code> to be used as condition
predicates. The function enumerates all possible conditions in the form of
elementary conjunctions of selected predicates, and for each condition,
a user-defined callback function <code>f</code> is executed. The callback function is
intended to perform some analysis and return an object representing a pattern
or patterns related to the condition. <code>dig()</code> returns a list of these
returned objects.</p>
<p>The callback function <code>f</code> may have some arguments that are listed in the
<code>f</code> argument description. The algorithm provides information about the
generated condition based on the present arguments.</p>
<p>Additionally to <code>condition</code>, the function allows for the selection of
the so-called <em>focus</em> predicates. The focus predicates, a.k.a. <em>foci</em>, are
predicates that are evaluated within each condition and some additional
information is provided to the callback function about them.</p>
<p><code>dig()</code> allows to specify some restrictions on the generated conditions,
such as:</p><ul><li><p>the minimum and maximum length of the condition (<code>min_length</code> and
<code>max_length</code> arguments).</p></li>
<li><p>the minimum support of the condition (<code>min_support</code> argument). Support
of the condition is the relative frequency of the condition in the dataset
<code>x</code>.</p></li>
<li><p>the minimum support of the focus (<code>min_focus_support</code> argument). Support
of the focus is the relative frequency of rows such that all condition
predicates AND the focus are TRUE on it. Foci with support lower than
<code>min_focus_support</code> are filtered out.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dig</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">f</span>,</span>
<span>  condition <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  focus <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  disjoint <span class="op">=</span> <span class="fu"><a href="var_names.html">var_names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  min_length <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  max_length <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  min_support <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  min_focus_support <span class="op">=</span> <span class="va">min_support</span>,</span>
<span>  filter_empty_foci <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  t_norm <span class="op">=</span> <span class="st">"goguen"</span>,</span>
<span>  threads <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  error_context <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>arg_x <span class="op">=</span> <span class="st">"x"</span>, arg_f <span class="op">=</span> <span class="st">"f"</span>, arg_condition <span class="op">=</span> <span class="st">"condition"</span>, arg_focus <span class="op">=</span></span>
<span>    <span class="st">"focus"</span>, arg_disjoint <span class="op">=</span> <span class="st">"disjoint"</span>, arg_min_length <span class="op">=</span> <span class="st">"min_length"</span>, arg_max_length <span class="op">=</span></span>
<span>    <span class="st">"max_length"</span>, arg_min_support <span class="op">=</span> <span class="st">"min_support"</span>, arg_min_focus_support <span class="op">=</span></span>
<span>    <span class="st">"min_focus_support"</span>, arg_filter_empty_foci <span class="op">=</span> <span class="st">"filter_empty_foci"</span>, arg_t_norm <span class="op">=</span></span>
<span>    <span class="st">"t_norm"</span>, arg_threads <span class="op">=</span> <span class="st">"threads"</span>, call <span class="op">=</span> <span class="fu">current_env</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a matrix or data frame. The matrix must be numeric (double) or logical.
If <code>x</code> is a data frame then each column must be either numeric (double) or
logical.</p></dd>


<dt id="arg-f">f<a class="anchor" aria-label="anchor" href="#arg-f"></a></dt>
<dd><p>the callback function executed for each generated condition. This
function may have some of the following arguments. Based on the present
arguments, the algorithm would provide information about the generated
condition:</p><ul><li><p><code>condition</code> - a named integer vector of column indices that represent
the predicates of the condition. Names of the vector correspond to
column names;</p></li>
<li><p><code>support</code> - a numeric scalar value of the current condition's support;</p></li>
<li><p><code>indices</code> - a logical vector indicating the rows satisfying the condition;</p></li>
<li><p><code>weights</code> - (similar to indices) weights of rows to which they satisfy
the current condition;</p></li>
<li><p><code>pp</code> - a value of a contingency table, <code>condition &amp; focus</code>.
<code>pp</code> is a named numeric vector where each value is a support of conjunction
of the condition with a foci column (see the <code>focus</code> argument to specify,
which columns). Names of the vector are foci column names.</p></li>
<li><p><code>pn</code> - a value of a contingency table, <code>condition &amp; neg focus</code>.
<code>pn</code> is a named numeric vector where each value is a support of conjunction
of the condition with a negated foci column (see the <code>focus</code> argument to
specify, which columns are foci) - names of the vector are foci column names.</p></li>
<li><p><code>np</code> - a value of a contingency table, <code>neg condition &amp; focus</code>.
<code>np</code> is a named numeric vector where each value is a support of conjunction
of the negated condition with a foci column (see the <code>focus</code> argument to
specify, which columns are foci) - names of the vector are foci column names.</p></li>
<li><p><code>nn</code> - a value of a contingency table, <code>neg condition &amp; neg focus</code>.
<code>nn</code> is a named numeric vector where each value is a support of conjunction
of the negated condition with a negated foci column (see the <code>focus</code>
argument to specify, which columns are foci) - names of the vector are foci
column names.</p></li>
<li><p><code>foci_supports</code> - (deprecated, use <code>pp</code> instead)
a named numeric vector of supports of foci columns
(see <code>focus</code> argument to specify, which columns are foci) - names of the
vector are foci column names.</p></li>
</ul></dd>


<dt id="arg-condition">condition<a class="anchor" aria-label="anchor" href="#arg-condition"></a></dt>
<dd><p>a tidyselect expression (see
<a href="https://tidyselect.r-lib.org/articles/syntax.html" class="external-link">tidyselect syntax</a>)
specifying the columns to use as condition predicates</p></dd>


<dt id="arg-focus">focus<a class="anchor" aria-label="anchor" href="#arg-focus"></a></dt>
<dd><p>a tidyselect expression (see
<a href="https://tidyselect.r-lib.org/articles/syntax.html" class="external-link">tidyselect syntax</a>)
specifying the columns to use as focus predicates</p></dd>


<dt id="arg-disjoint">disjoint<a class="anchor" aria-label="anchor" href="#arg-disjoint"></a></dt>
<dd><p>an atomic vector of size equal to the number of columns of <code>x</code>
that specifies the groups of predicates: if some elements of the <code>disjoint</code>
vector are equal, then the corresponding columns of <code>x</code> will NOT be
present together in a single condition. If <code>x</code> is prepared with
<code><a href="partition.html">partition()</a></code>, using the <code><a href="var_names.html">var_names()</a></code> function on <code>x</code>'s column names
is a convenient way to create the <code>disjoint</code> vector.</p></dd>


<dt id="arg-min-length">min_length<a class="anchor" aria-label="anchor" href="#arg-min-length"></a></dt>
<dd><p>the minimum size (the minimum number of predicates) of the
condition to be generated (must be greater or equal to 0). If 0, the empty
condition is generated in the first place.</p></dd>


<dt id="arg-max-length">max_length<a class="anchor" aria-label="anchor" href="#arg-max-length"></a></dt>
<dd><p>The maximum size (the maximum number of predicates) of the
condition to be generated. If equal to Inf, the maximum length of conditions
is limited only by the number of available predicates.</p></dd>


<dt id="arg-min-support">min_support<a class="anchor" aria-label="anchor" href="#arg-min-support"></a></dt>
<dd><p>the minimum support of a condition to trigger the callback
function for it. The support of the condition is the relative frequency
of the condition in the dataset <code>x</code>. For logical data, it equals to the
relative frequency of rows such that all condition predicates are TRUE on it.
For numerical (double) input, the support is computed as the mean (over all
rows) of multiplications of predicate values.</p></dd>


<dt id="arg-min-focus-support">min_focus_support<a class="anchor" aria-label="anchor" href="#arg-min-focus-support"></a></dt>
<dd><p>the minimum support of a focus, for the focus to be passed
to the callback function. The support of the focus is the relative frequency
of rows such that all condition predicates AND the focus are TRUE on it.
For numerical (double) input, the support is computed as the mean (over all
rows) of multiplications of predicate values.</p></dd>


<dt id="arg-filter-empty-foci">filter_empty_foci<a class="anchor" aria-label="anchor" href="#arg-filter-empty-foci"></a></dt>
<dd><p>a logical scalar indicating whether to skip conditions,
for which no focus remains available after filtering by <code>min_focus_support</code>.
If <code>TRUE</code>, the condition is passed to the callback function only if at least
one focus remains after filtering. If <code>FALSE</code>, the condition is passed to the
callback function regardless of the number of remaining foci.</p></dd>


<dt id="arg-t-norm">t_norm<a class="anchor" aria-label="anchor" href="#arg-t-norm"></a></dt>
<dd><p>a t-norm used to compute conjunction of weights. It must be one of
<code>"goedel"</code> (minimum t-norm), <code>"goguen"</code> (product t-norm), or <code>"lukas"</code>
(Lukasiewicz t-norm).</p></dd>


<dt id="arg-threads">threads<a class="anchor" aria-label="anchor" href="#arg-threads"></a></dt>
<dd><p>the number of threads to use for parallel computation.</p></dd>


<dt id="arg-error-context">error_context<a class="anchor" aria-label="anchor" href="#arg-error-context"></a></dt>
<dd><p>a list of details to be used in error messages.
This argument is useful when <code>dig()</code> is called from another
function to provide error messages, which refer to arguments of the
calling function. The list must contain the following elements:</p><ul><li><p><code>arg_x</code> - the name of the argument <code>x</code> as a character string</p></li>
<li><p><code>arg_f</code> - the name of the argument <code>f</code> as a character string</p></li>
<li><p><code>arg_condition</code> - the name of the argument <code>condition</code> as a character
string</p></li>
<li><p><code>arg_focus</code> - the name of the argument <code>focus</code> as a character string</p></li>
<li><p><code>arg_disjoint</code> - the name of the argument <code>disjoint</code> as a character
string</p></li>
<li><p><code>arg_min_length</code> - the name of the argument <code>min_length</code> as a character
string</p></li>
<li><p><code>arg_max_length</code> - the name of the argument <code>max_length</code> as a character
string</p></li>
<li><p><code>arg_min_support</code> - the name of the argument <code>min_support</code> as a character
string</p></li>
<li><p><code>arg_min_focus_support</code> - the name of the argument <code>min_focus_support</code>
as a character string</p></li>
<li><p><code>arg_filter_empty_foci</code> - the name of the argument <code>filter_empty_foci</code>
as a character string</p></li>
<li><p><code>arg_t_norm</code> - the name of the argument <code>t_norm</code> as a character string</p></li>
<li><p><code>arg_threads</code> - the name of the argument <code>threads</code> as a character string</p></li>
<li><p><code>call</code> - an environment in which to evaluate the error messages.</p></li>
</ul></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments, currently unused.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of results provided by the callback function <code>f</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="partition.html">partition()</a></code>, <code><a href="var_names.html">var_names()</a></code>, <code><a href="dig_grid.html">dig_grid()</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Michal Burda</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Prepare iris data for use with dig()</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="partition.html">partition</a></span><span class="op">(</span><span class="va">iris</span>, .breaks <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Call f() for each condition with support &gt;= 0.5. The result is a list</span></span></span>
<span class="r-in"><span><span class="co"># of strings representing the conditions.</span></span></span>
<span class="r-in"><span><span class="fu">dig</span><span class="op">(</span>x <span class="op">=</span> <span class="va">d</span>,</span></span>
<span class="r-in"><span>    f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="format_condition.html">format_condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">condition</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span>,</span></span>
<span class="r-in"><span>    min_support <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{Sepal.Width=(-Inf;3.2]}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{Sepal.Length=(-Inf;6.1]}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{Petal.Length=(3.95;Inf]}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{Petal.Width=(-Inf;1.3]}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{Petal.Length=(3.95;Inf],Sepal.Width=(-Inf;3.2]}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a more complex pattern object - a list with some statistics</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">dig</span><span class="op">(</span>x <span class="op">=</span> <span class="va">d</span>,</span></span>
<span class="r-in"><span>           f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">support</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>               <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>condition <span class="op">=</span> <span class="fu"><a href="format_condition.html">format_condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">condition</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    support <span class="op">=</span> <span class="va">support</span><span class="op">)</span></span></span>
<span class="r-in"><span>           <span class="op">}</span>,</span></span>
<span class="r-in"><span>           min_support <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]$condition</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]$support</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]$condition</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{Sepal.Width=(-Inf;3.2]}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]$support</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.7133333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]$condition</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{Sepal.Length=(-Inf;6.1]}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]$support</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.6333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]$condition</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{Petal.Length=(3.95;Inf]}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]$support</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5933333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]$condition</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{Petal.Width=(-Inf;1.3]}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]]$support</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]]$condition</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "{Petal.Length=(3.95;Inf],Sepal.Width=(-Inf;3.2]}"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[6]]$support</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5266666</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Format the result as a data frame</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">res</span>, <span class="va">as_tibble</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   condition                                        support</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> {}                                                 1    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> {Sepal.Width=(-Inf;3.2]}                           0.713</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> {Sepal.Length=(-Inf;6.1]}                          0.633</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> {Petal.Length=(3.95;Inf]}                          0.593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> {Petal.Width=(-Inf;1.3]}                           0.520</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> {Petal.Length=(3.95;Inf],Sepal.Width=(-Inf;3.2]}   0.527</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Within each condition, evaluate also supports of columns starting with</span></span></span>
<span class="r-in"><span><span class="co"># "Species"</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">dig</span><span class="op">(</span>x <span class="op">=</span> <span class="va">d</span>,</span></span>
<span class="r-in"><span>           f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">support</span>, <span class="va">pp</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>               <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>condition <span class="op">=</span> <span class="fu"><a href="format_condition.html">format_condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">condition</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>condition_support <span class="op">=</span> <span class="va">support</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">pp</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>           <span class="op">}</span>,</span></span>
<span class="r-in"><span>           condition <span class="op">=</span> <span class="op">!</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           focus <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           min_support <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>           min_focus_support <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Format the result as a tibble</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">res</span>, <span class="va">as_tibble</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   condition              condition_support `Species=setosa` `Species=versicolor`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> {}                                 1                0.333                0.333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> {Sepal.Width=(-Inf;3.…             0.713            0.113                0.32 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> {Sepal.Length=(-Inf;6…             0.633            0.333                0.227</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> {Petal.Length=(3.95;I…             0.593            0                    0.26 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> {Petal.Width=(-Inf;1.…             0.520            0.333                0.187</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> {Petal.Length=(3.95;I…             0.527            0                    0.247</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: `Species=virginica` &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For each condition, create multiple patterns based on the focus columns</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">dig</span><span class="op">(</span>x <span class="op">=</span> <span class="va">d</span>,</span></span>
<span class="r-in"><span>           f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">support</span>, <span class="va">pp</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>               <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">pp</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>                   <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>condition <span class="op">=</span> <span class="fu"><a href="format_condition.html">format_condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">condition</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        condition_support <span class="op">=</span> <span class="va">support</span>,</span></span>
<span class="r-in"><span>                        focus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">pp</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                        focus_support <span class="op">=</span> <span class="va">pp</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>               <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>           <span class="op">}</span>,</span></span>
<span class="r-in"><span>           condition <span class="op">=</span> <span class="op">!</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           focus <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           min_support <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>           min_focus_support <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># As res is now a list of lists, we need to flatten it before converting to</span></span></span>
<span class="r-in"><span><span class="co"># a tibble</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">res</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Format the result as a tibble</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">res</span>, <span class="va">as_tibble</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 18 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    condition                               condition_support focus focus_support</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> {}                                                  1     Spec…        0.333 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> {}                                                  1     Spec…        0.333 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> {}                                                  1     Spec…        0.333 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> {Sepal.Width=(-Inf;3.2]}                            0.713 Spec…        0.113 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> {Sepal.Width=(-Inf;3.2]}                            0.713 Spec…        0.32  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> {Sepal.Width=(-Inf;3.2]}                            0.713 Spec…        0.28  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> {Sepal.Length=(-Inf;6.1]}                           0.633 Spec…        0.333 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> {Sepal.Length=(-Inf;6.1]}                           0.633 Spec…        0.227 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> {Sepal.Length=(-Inf;6.1]}                           0.633 Spec…        0.073<span style="text-decoration: underline;">3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> {Petal.Length=(3.95;Inf]}                           0.593 Spec…        0     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> {Petal.Length=(3.95;Inf]}                           0.593 Spec…        0.26  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> {Petal.Length=(3.95;Inf]}                           0.593 Spec…        0.333 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> {Petal.Width=(-Inf;1.3]}                            0.520 Spec…        0.333 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> {Petal.Width=(-Inf;1.3]}                            0.520 Spec…        0.187 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> {Petal.Width=(-Inf;1.3]}                            0.520 Spec…        0     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> {Petal.Length=(3.95;Inf],Sepal.Width=(…             0.527 Spec…        0     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> {Petal.Length=(3.95;Inf],Sepal.Width=(…             0.527 Spec…        0.247 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> {Petal.Length=(3.95;Inf],Sepal.Width=(…             0.527 Spec…        0.28  </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michal Burda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>


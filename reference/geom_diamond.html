<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Geom for drawing diamond plots of lattice structures — geom_diamond • nuggets</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Geom for drawing diamond plots of lattice structures — geom_diamond"><meta name="description" content="Create a custom ggplot2 geom for visualizing lattice structures as
diamond plots. This geom is particularly useful for displaying
association rules and their ancestor–descendant relationships in a clear,
compact graphical form."><meta property="og:description" content="Create a custom ggplot2 geom for visualizing lattice structures as
diamond plots. This geom is particularly useful for displaying
association rules and their ancestor–descendant relationships in a clear,
compact graphical form."><meta property="og:image" content="https://beerda.github.io/nuggets/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nuggets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/nuggets.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/beerda/nuggets/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Geom for drawing diamond plots of lattice structures</h1>
      <small class="dont-index">Source: <a href="https://github.com/beerda/nuggets/blob/main/R/geom_diamond.R" class="external-link"><code>R/geom_diamond.R</code></a></small>
      <div class="d-none name"><code>geom_diamond.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a custom <code>ggplot2</code> geom for visualizing lattice structures as
<em>diamond plots</em>. This geom is particularly useful for displaying
association rules and their ancestor–descendant relationships in a clear,
compact graphical form.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geom_diamond</span><span class="op">(</span></span>
<span>  mapping <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  position <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  linetype <span class="op">=</span> <span class="st">"solid"</span>,</span>
<span>  linewidth <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  nudge_x <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  nudge_y <span class="op">=</span> <span class="fl">0.125</span>,</span>
<span>  show.legend <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  inherit.aes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mapping">mapping<a class="anchor" aria-label="anchor" href="#arg-mapping"></a></dt>
<dd><p>Aesthetic mappings, usually created with <code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">ggplot2::aes()</a></code>.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame representing the lattice structure to plot.</p></dd>


<dt id="arg-stat">stat<a class="anchor" aria-label="anchor" href="#arg-stat"></a></dt>
<dd><p>Statistical transformation to apply; defaults to <code>"identity"</code>.</p></dd>


<dt id="arg-position">position<a class="anchor" aria-label="anchor" href="#arg-position"></a></dt>
<dd><p>Position adjustment for the geom; defaults to <code>"identity"</code>.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, missing values are silently removed.</p></dd>


<dt id="arg-linetype">linetype<a class="anchor" aria-label="anchor" href="#arg-linetype"></a></dt>
<dd><p>Line type for edges; defaults to <code>"solid"</code>.</p></dd>


<dt id="arg-linewidth">linewidth<a class="anchor" aria-label="anchor" href="#arg-linewidth"></a></dt>
<dd><p>Width of edges connecting parent and child nodes. If set to
<code>NA</code>, edge widths are determined by the <code>linewidth</code> aesthetic. If no
aesthetic is provided, a default width of <code>0.5</code> is used.</p></dd>


<dt id="arg-nudge-x">nudge_x<a class="anchor" aria-label="anchor" href="#arg-nudge-x"></a></dt>
<dd><p>Horizontal nudge applied to labels.</p></dd>


<dt id="arg-nudge-y">nudge_y<a class="anchor" aria-label="anchor" href="#arg-nudge-y"></a></dt>
<dd><p>Vertical nudge applied to labels.</p></dd>


<dt id="arg-show-legend">show.legend<a class="anchor" aria-label="anchor" href="#arg-show-legend"></a></dt>
<dd><p>Logical; whether to include a legend. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-inherit-aes">inherit.aes<a class="anchor" aria-label="anchor" href="#arg-inherit-aes"></a></dt>
<dd><p>Logical; whether to inherit aesthetics from the plot.
Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code><a href="https://ggplot2.tidyverse.org/reference/layer.html" class="external-link">ggplot2::layer()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>ggplot2</code> layer object that adds a diamond lattice visualization
to an existing plot.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>In a diamond plot, nodes (diamonds) represent items or conditions within
the lattice, while edges denote inclusion (subset) relationships between
them. The geom combines node and edge rendering with flexible control over
aesthetics such as labels, color, and size.</p>
<p><strong>Concept overview</strong></p>
<p>A <em>lattice</em> represents inclusion relationships between conditions. Each
node corresponds to a condition, and a line connects a condition to its
direct descendants:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>       {a}          <span class="ot">&lt;-</span> <span class="fu">ancestor</span> (parent)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>      <span class="sc">/</span>   \</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  {a,b}   {a,c}     <span class="ot">&lt;-</span> direct <span class="fu">descendants</span> (children)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>     \     <span class="sc">/</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>     {a,b,c}        <span class="ot">&lt;-</span> leaf condition</span></code></pre><p></p></div>
<p>The layout positions broader (more general) conditions above their
descendants. This helps visualize hierarchical structures such as those
produced by association rule mining or subset lattices.</p>
<p><strong>Supported aesthetics</strong></p><ul><li><p><code>condition</code> – character vector of conditions formatted with
<code><a href="format_condition.html">format_condition()</a></code>. Each condition defines one node in the lattice.
The hierarchy is determined by subset inclusion: a condition \(X\)
is a descendant of \(Y\) if \(Y \subset X\). Each condition must
be unique.</p></li>
<li><p><code>label</code> – optional text label for each node. If omitted,
the condition string is used.</p></li>
<li><p><code>colour</code> – border color of the node.</p></li>
<li><p><code>fill</code> – interior color of the node.</p></li>
<li><p><code>size</code> – size of nodes.</p></li>
<li><p><code>shape</code> – node shape.</p></li>
<li><p><code>alpha</code> – transparency of nodes.</p></li>
<li><p><code>stroke</code> – border line width of nodes.</p></li>
<li><p><code>linewidth</code> – edge width between parent and child nodes,
computed as the difference of this aesthetic between them.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Michal Burda</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Prepare data by partitioning numeric columns into fuzzy or crisp sets</span></span></span>
<span class="r-in"><span><span class="va">part</span> <span class="op">&lt;-</span> <span class="fu"><a href="partition.html">partition</a></span><span class="op">(</span><span class="va">iris</span>, .breaks <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Find all antecedents with "Sepal" for rules with consequent "Species=setosa"</span></span></span>
<span class="r-in"><span><span class="va">rules</span> <span class="op">&lt;-</span> <span class="fu"><a href="dig_associations.html">dig_associations</a></span><span class="op">(</span><span class="va">part</span>,</span></span>
<span class="r-in"><span>                          antecedent <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"Sepal"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          consequent <span class="op">=</span> <span class="va">`Species=setosa`</span>,</span></span>
<span class="r-in"><span>                          min_length <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                          max_length <span class="op">=</span> <span class="cn">Inf</span>,</span></span>
<span class="r-in"><span>                          min_coverage <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                          min_support <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                          min_confidence <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                          measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lift"</span>, <span class="st">"conviction"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          max_results <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add abbreviated labels for readability</span></span></span>
<span class="r-in"><span><span class="va">rules</span><span class="op">$</span><span class="va">abbrev</span> <span class="op">&lt;-</span> <span class="fu"><a href="shorten_condition.html">shorten_condition</a></span><span class="op">(</span><span class="va">rules</span><span class="op">$</span><span class="va">antecedent</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot the lattice of rules as a diamond diagram</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">rules</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>condition <span class="op">=</span> <span class="va">antecedent</span>,</span></span>
<span class="r-in"><span>      fill <span class="op">=</span> <span class="va">confidence</span>,</span></span>
<span class="r-in"><span>      linewidth <span class="op">=</span> <span class="va">confidence</span>,</span></span>
<span class="r-in"><span>      size <span class="op">=</span> <span class="va">coverage</span>,</span></span>
<span class="r-in"><span>      label <span class="op">=</span> <span class="va">abbrev</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">geom_diamond</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michal Burda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

